2021-11-12 12:44:49.355 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:44:50.574 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:44:50.672 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:44:50.719 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:44:50.766 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:44:50.824 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:44:50.871 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:44:51.423 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 12:44:51.575 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:44:51.860 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:44:51.905 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:44:51.949 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:44:51.995 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:44:52.042 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:44:52.045 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:44:52.529 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 12:44:52.589 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 12:44:52.614 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 12:44:52.893 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 12:45:23.069 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:45:23.215 -08:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:45:23.240 -08:00 [INF] Removing 0 grants
2021-11-12 12:45:23.297 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:45:23.301 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:45:36.076 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34
2021-11-12 12:45:36.218 -08:00 [INF] HTTP POST //Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 responded 404 in 126.6669 ms
2021-11-12 12:45:36.239 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34 - 404 0 - 166.5759ms
2021-11-12 12:45:36.255 -08:00 [INF] Connection id "0HMD63LGE2A5P", Request id "0HMD63LGE2A5P:00000002": the application completed without reading the entire request body.
2021-11-12 12:45:39.580 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34
2021-11-12 12:45:39.587 -08:00 [INF] HTTP POST //Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 responded 404 in 5.2665 ms
2021-11-12 12:45:39.590 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34 - 404 0 - 9.4781ms
2021-11-12 12:45:39.599 -08:00 [INF] Connection id "0HMD63LGE2A5P", Request id "0HMD63LGE2A5P:00000003": the application completed without reading the entire request body.
2021-11-12 12:45:41.219 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34
2021-11-12 12:45:41.224 -08:00 [INF] HTTP POST //Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 responded 404 in 3.2485 ms
2021-11-12 12:45:41.226 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34 - 404 0 - 7.1538ms
2021-11-12 12:45:41.228 -08:00 [INF] Connection id "0HMD63LGE2A5P", Request id "0HMD63LGE2A5P:00000004": the application completed without reading the entire request body.
2021-11-12 12:45:48.876 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34
2021-11-12 12:45:48.878 -08:00 [INF] HTTP POST //Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 responded 404 in 0.6661 ms
2021-11-12 12:45:48.882 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001//Account/Authenticate?userName=jamesan&password=Wat%3Ecom3 - 34 - 404 0 - 5.7229ms
2021-11-12 12:45:48.884 -08:00 [INF] Connection id "0HMD63LGE2A5P", Request id "0HMD63LGE2A5P:00000005": the application completed without reading the entire request body.
2021-11-12 12:45:49.832 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 12:45:49.858 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 12:45:49.881 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:45:50.072 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 12:45:50.230 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 397.4415 ms
2021-11-12 12:45:50.243 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 411.0301ms
2021-11-12 12:45:50.244 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 12:45:50.248 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 12:45:50.282 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 35.1036 ms
2021-11-12 12:45:50.286 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 41.4491ms
2021-11-12 12:45:50.298 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156
2021-11-12 12:45:50.316 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 12:45:50.391 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:45:50.441 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 12:45:50.484 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD63LGE2A5R:00000002","TimeStamp":"2021-11-12T20:45:50.0000000Z","ProcessId":44328,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 12:45:50.661 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 12:45:50.749 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 12:45:50.801 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 12:45:50.881 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 12:45:50.995 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 12:45:51.020 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD63LGE2A5R:00000002","TimeStamp":"2021-11-12T20:45:51.0000000Z","ProcessId":44328,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 12:45:51.102 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 12:45:51.121 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid profile Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid profile Viking.Annotation ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 12:45:51.239 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 12:45:51.312 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 12:45:51.377 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 12:45:51.431 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 12:45:51.613 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid profile Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****h0Fw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD63LGE2A5R:00000002","TimeStamp":"2021-11-12T20:45:51.0000000Z","ProcessId":44328,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 12:45:51.646 -08:00 [INF] HTTP POST /connect/token responded 200 in 1344.1980 ms
2021-11-12 12:45:51.649 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156 - 200 - application/json;+charset=UTF-8 1350.6738ms
2021-11-12 12:45:51.653 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - -
2021-11-12 12:45:51.670 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 12:45:51.682 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-11-12 12:45:51.684 -08:00 [INF] HTTP GET /Resources/UserPermissions?id=RC1 responded 302 in 28.8508 ms
2021-11-12 12:45:51.686 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - - - 302 0 - 32.7452ms
2021-11-12 12:45:51.688 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 - -
2021-11-12 12:45:51.691 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 12:45:51.732 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 12:45:51.894 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 12:45:51.909 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 12:45:51.919 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 16.0817ms.
2021-11-12 12:45:51.995 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 12:45:52.274 -08:00 [INF] Executed ViewResult - view Login executed in 283.8999ms.
2021-11-12 12:45:52.278 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 542.2096ms
2021-11-12 12:45:52.280 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 12:45:52.282 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 responded 200 in 593.0156 ms
2021-11-12 12:45:52.286 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 - - - 200 - text/html;+charset=utf-8 598.2274ms
2021-11-12 12:45:53.343 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:45:53.394 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:45:53.397 -08:00 [INF] Removing 0 grants
2021-11-12 12:45:53.443 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:45:53.449 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:46:23.468 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:46:23.525 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:46:23.529 -08:00 [INF] Removing 0 grants
2021-11-12 12:46:23.572 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:46:23.578 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:46:53.597 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:46:53.654 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:46:53.667 -08:00 [INF] Removing 0 grants
2021-11-12 12:46:53.712 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:46:53.716 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:47:23.735 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:47:23.793 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:47:23.822 -08:00 [INF] Removing 0 grants
2021-11-12 12:47:23.867 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:47:23.873 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:47:53.875 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:47:53.938 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:47:53.947 -08:00 [INF] Removing 0 grants
2021-11-12 12:47:53.993 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:47:54.003 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:48:24.023 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:48:24.074 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:48:24.078 -08:00 [INF] Removing 0 grants
2021-11-12 12:48:24.124 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:48:24.137 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:48:54.145 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:48:54.194 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:48:54.204 -08:00 [INF] Removing 0 grants
2021-11-12 12:48:54.252 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:48:54.259 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:49:24.271 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:49:24.321 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:49:24.325 -08:00 [INF] Removing 0 grants
2021-11-12 12:49:24.369 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:49:24.372 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:49:54.388 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:49:54.443 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:49:54.461 -08:00 [INF] Removing 0 grants
2021-11-12 12:49:54.510 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:49:54.513 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:50:24.525 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:50:24.574 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 12:50:24.610 -08:00 [INF] Removing 0 grants
2021-11-12 12:50:24.659 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 12:50:24.667 -08:00 [INF] Removing 0 device flow codes
2021-11-12 12:50:51.627 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:50:52.434 -08:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:50:52.517 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:50:52.568 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:50:52.623 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:50:52.684 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:50:52.731 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:50:53.233 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 12:50:53.407 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:50:53.695 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:50:53.756 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:50:53.802 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:50:53.852 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:50:53.908 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:50:53.911 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:50:54.517 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 12:50:54.591 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 12:50:54.622 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 12:50:54.917 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 12:51:14.248 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:51:15.091 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:51:15.177 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:51:15.230 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:51:15.278 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:51:15.338 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:51:15.382 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:51:16.010 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 12:51:16.183 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:51:16.485 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:51:16.531 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:51:16.583 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:51:16.637 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:51:16.693 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:51:16.704 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:51:17.160 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 12:51:17.217 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 12:51:17.242 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 12:51:17.470 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 12:53:25.793 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 12:53:26.913 -08:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:53:27.001 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:53:27.050 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:53:27.099 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:53:27.157 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:53:27.208 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:53:27.726 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 12:53:27.832 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 12:53:28.102 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:53:28.150 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:53:28.200 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 12:53:28.247 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 12:53:28.306 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 12:53:28.309 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 12:53:28.646 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 12:53:28.694 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 12:53:28.712 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 12:53:28.903 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 13:43:31.618 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:43:32.823 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:43:32.920 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:43:32.976 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:43:33.027 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:43:33.092 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:43:33.201 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:43:33.655 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 13:43:33.772 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:43:34.071 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:43:34.120 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:43:34.165 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:43:34.211 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:43:34.261 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:43:34.263 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:43:34.622 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 13:43:34.670 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 13:43:34.689 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 13:43:34.884 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 13:44:04.957 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:44:05.137 -08:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:44:05.163 -08:00 [INF] Removing 0 grants
2021-11-12 13:44:05.217 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:44:05.222 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:44:09.136 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 13:44:09.209 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 13:44:09.230 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:44:09.442 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:44:09.647 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 499.4701 ms
2021-11-12 13:44:09.658 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 526.2021ms
2021-11-12 13:44:09.671 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 13:44:09.680 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 13:44:09.713 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 40.4710 ms
2021-11-12 13:44:09.715 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 43.7539ms
2021-11-12 13:44:09.722 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156
2021-11-12 13:44:09.747 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 13:44:09.819 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:44:09.870 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:44:09.915 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD64M7DHUI8:00000002","TimeStamp":"2021-11-12T21:44:09.0000000Z","ProcessId":34072,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 13:44:10.116 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:44:10.210 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 13:44:10.265 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:44:10.355 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 13:44:10.459 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 13:44:10.484 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD64M7DHUI8:00000002","TimeStamp":"2021-11-12T21:44:10.0000000Z","ProcessId":34072,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 13:44:10.560 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 13:44:10.579 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid profile Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid profile Viking.Annotation ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 13:44:10.702 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 13:44:10.782 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 13:44:10.843 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 13:44:10.902 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 13:44:11.165 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid profile Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****u20g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD64M7DHUI8:00000002","TimeStamp":"2021-11-12T21:44:11.0000000Z","ProcessId":34072,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 13:44:11.223 -08:00 [INF] HTTP POST /connect/token responded 200 in 1499.4697 ms
2021-11-12 13:44:11.226 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156 - 200 - application/json;+charset=UTF-8 1503.3409ms
2021-11-12 13:44:11.232 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - -
2021-11-12 13:44:11.343 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 13:44:11.354 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-11-12 13:44:11.355 -08:00 [INF] HTTP GET /Resources/UserPermissions?id=RC1 responded 302 in 121.2516 ms
2021-11-12 13:44:11.357 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - - - 302 0 - 125.5609ms
2021-11-12 13:44:11.359 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 - -
2021-11-12 13:44:11.374 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 13:44:11.430 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 13:44:11.659 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 13:44:11.691 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 13:44:11.705 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 17.7554ms.
2021-11-12 13:44:11.777 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 13:44:12.203 -08:00 [INF] Executed ViewResult - view Login executed in 430.7276ms.
2021-11-12 13:44:12.208 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 770.8825ms
2021-11-12 13:44:12.210 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 13:44:12.211 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 responded 200 in 849.9968 ms
2021-11-12 13:44:12.217 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions%3Fid%3DRC1 - - - 200 - text/html;+charset=utf-8 857.7865ms
2021-11-12 13:45:13.223 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:45:14.108 -08:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:45:14.195 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:45:14.248 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:45:14.296 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:45:14.356 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:45:14.399 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:45:14.840 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 13:45:14.956 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:45:15.238 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:45:15.283 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:45:15.331 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:45:15.381 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:45:15.429 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:45:15.432 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:45:15.794 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 13:45:15.842 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 13:45:15.859 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 13:45:16.051 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 13:45:19.341 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 13:45:19.417 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 13:45:19.442 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:45:19.681 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:45:19.857 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 499.5572 ms
2021-11-12 13:45:19.872 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 533.3214ms
2021-11-12 13:45:19.887 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 13:45:19.898 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 13:45:19.934 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 43.2834 ms
2021-11-12 13:45:19.937 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 49.9003ms
2021-11-12 13:45:19.962 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156
2021-11-12 13:45:19.987 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 13:45:20.065 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:45:20.120 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:45:20.175 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD64MSB1AG3:00000002","TimeStamp":"2021-11-12T21:45:20.0000000Z","ProcessId":36680,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 13:45:20.357 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:45:20.482 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 13:45:20.535 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:45:20.624 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 13:45:20.737 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 13:45:20.763 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD64MSB1AG3:00000002","TimeStamp":"2021-11-12T21:45:20.0000000Z","ProcessId":36680,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 13:45:20.839 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 13:45:20.855 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid profile Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid profile Viking.Annotation ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 13:45:20.967 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 13:45:21.046 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 13:45:21.103 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 13:45:21.163 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 13:45:21.360 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid profile Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****rcOA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD64MSB1AG3:00000002","TimeStamp":"2021-11-12T21:45:21.0000000Z","ProcessId":36680,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 13:45:21.397 -08:00 [INF] HTTP POST /connect/token responded 200 in 1432.2536 ms
2021-11-12 13:45:21.399 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156 - 200 - application/json;+charset=UTF-8 1437.4410ms
2021-11-12 13:45:21.404 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - -
2021-11-12 13:45:21.746 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 13:45:21.750 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 13:45:21.752 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:45:21.803 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 13:45:21.808 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 59.2509 ms
2021-11-12 13:45:21.810 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 63.3362ms
2021-11-12 13:45:21.938 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 13:45:21.941 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 13:45:21.942 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.7429 ms
2021-11-12 13:45:21.961 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 22.4488ms
2021-11-12 13:45:22.023 -08:00 [INF] Successfully validated the token.
2021-11-12 13:45:22.038 -08:00 [INF] Authorization was successful.
2021-11-12 13:45:22.043 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer)'
2021-11-12 13:45:22.083 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserPermissions(System.String, System.String) on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 13:45:22.198 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer) - Validation state: "Valid"
2021-11-12 13:45:22.294 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:45:22.347 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__id_0
2021-11-12 13:45:22.404 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2021-11-12 13:45:22.479 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2021-11-12 13:45:22.560 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2021-11-12 13:45:22.624 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__ResourceId_0='25', @__UserId_1='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE ([g].[ResourceId] = @__ResourceId_0) AND ([g].[UserId] = @__UserId_1)
2021-11-12 13:45:22.681 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__ResourceId_0='25'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE ([g].[ResourceId] = @__ResourceId_0) AND (([g].[ResourceId] = @__ResourceId_0) AND [g].[GroupId] IN (CAST(-1 AS bigint), CAST(1 AS bigint), CAST(21 AS bigint), CAST(32 AS bigint)))
2021-11-12 13:45:22.694 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer), returned result Microsoft.AspNetCore.Mvc.JsonResult in 488.1105ms.
2021-11-12 13:45:22.712 -08:00 [INF] Executing JsonResult, writing value of type 'System.Linq.Enumerable+SelectEnumerableIterator`2[[<>f__AnonymousType34`4[[System.Int64, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], IdentityServer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-11-12 13:45:22.732 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer) in 635.9228ms
2021-11-12 13:45:22.735 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer)'
2021-11-12 13:45:22.741 -08:00 [INF] HTTP GET /Resources/UserPermissions?id=RC1 responded 200 in 1335.6383 ms
2021-11-12 13:45:22.742 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - - - 200 - application/json;+charset=utf-8 1338.7434ms
2021-11-12 13:45:46.132 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:45:46.227 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:45:46.235 -08:00 [INF] Removing 0 grants
2021-11-12 13:45:46.291 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:45:46.297 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:46:16.355 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:46:16.406 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:46:16.412 -08:00 [INF] Removing 0 grants
2021-11-12 13:46:16.458 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:46:16.463 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:46:46.484 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:46:46.550 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:46:46.554 -08:00 [INF] Removing 0 grants
2021-11-12 13:46:46.613 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:46:46.635 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:47:16.672 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:47:16.774 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:47:16.778 -08:00 [INF] Removing 0 grants
2021-11-12 13:47:16.826 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:47:16.837 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:47:46.855 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:47:46.910 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:47:46.916 -08:00 [INF] Removing 0 grants
2021-11-12 13:47:46.963 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:47:46.989 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:48:17.020 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:48:17.073 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:48:17.090 -08:00 [INF] Removing 0 grants
2021-11-12 13:48:17.143 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:48:17.156 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:48:47.173 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:48:47.221 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:48:47.224 -08:00 [INF] Removing 0 grants
2021-11-12 13:48:47.270 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:48:47.273 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:49:17.277 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:49:17.325 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:49:17.337 -08:00 [INF] Removing 0 grants
2021-11-12 13:49:17.387 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:49:17.393 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:49:47.396 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:49:47.449 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:49:47.461 -08:00 [INF] Removing 0 grants
2021-11-12 13:49:47.507 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:49:47.513 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:50:17.531 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:50:17.599 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:50:17.602 -08:00 [INF] Removing 0 grants
2021-11-12 13:50:17.650 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:50:17.654 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:50:47.681 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:50:47.745 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 13:50:47.789 -08:00 [INF] Removing 0 grants
2021-11-12 13:50:47.835 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 13:50:47.844 -08:00 [INF] Removing 0 device flow codes
2021-11-12 13:52:00.717 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 13:52:01.775 -08:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:52:01.887 -08:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:52:01.945 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:52:01.993 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:52:02.067 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:52:02.118 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:52:02.816 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 13:52:02.996 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 13:52:03.321 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:52:03.368 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:52:03.414 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 13:52:03.466 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 13:52:03.519 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 13:52:03.521 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 13:52:03.991 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 13:52:04.039 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 13:52:04.057 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 13:52:04.313 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:01:55.785 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:01:56.817 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:01:56.906 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:01:56.956 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:01:57.002 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:01:57.069 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:01:57.122 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:01:57.770 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:01:57.915 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:01:58.218 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:01:58.271 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:01:58.318 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:01:58.373 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:01:58.431 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:01:58.434 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:01:59.007 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:01:59.051 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:01:59.081 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:01:59.335 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:02:10.680 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 181
2021-11-12 14:02:10.775 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 14:02:10.835 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:02:11.077 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:11.208 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD6509NV8SP:00000002","TimeStamp":"2021-11-12T22:02:11.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 14:02:11.391 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] IN (N'RC1', N'RC1', N'RC1')
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:11.543 -08:00 [INF] Executed DbCommand (82ms) [Parameters=[@__scope_ScopeName_0='Annotate' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:02:11.598 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__scope_ScopeName_0='Read' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:02:11.646 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Review' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:02:11.694 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:02:11.757 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE EXISTS (
    SELECT 1
    FROM [Resource] AS [r1]
    WHERE [r1].[ResourceTypeId] IN (N'Volume', N'Volume', N'Volume') AND ([r1].[Name] = [r].[Name]))
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:11.853 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:02:11.965 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 14:02:11.992 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD6509NV8SP:00000002","TimeStamp":"2021-11-12T22:02:11.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 14:02:12.066 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:02:12.123 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:02:12.196 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__PermissionId_0='Annotate' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:02:12.247 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:02:12.297 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:02:12.311 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 14:02:12.320 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 14:02:12.358 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__PermissionId_0='Read' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:02:12.379 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:02:12.412 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:02:12.460 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:02:12.508 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__PermissionId_0='Review' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:02:12.562 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:02:12.580 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid RC1.Annotate RC1.Read RC1.Review Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation RC1.Annotate RC1.Read RC1.Review ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 14:02:12.688 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:12.699 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:02:12.776 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 460.6085 ms
2021-11-12 14:02:12.779 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:02:12.791 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 479.0804ms
2021-11-12 14:02:12.809 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 14:02:12.820 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 14:02:12.845 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:02:12.863 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 51.3283 ms
2021-11-12 14:02:12.867 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 58.0479ms
2021-11-12 14:02:12.872 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156
2021-11-12 14:02:12.875 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 14:02:12.878 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:02:12.901 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:02:12.927 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:12.938 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD6509NV8SR:00000002","TimeStamp":"2021-11-12T22:02:12.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 14:02:12.990 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:13.040 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:02:13.089 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:02:13.111 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid RC1.Annotate RC1.Read RC1.Review Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****uJlg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD6509NV8SP:00000002","TimeStamp":"2021-11-12T22:02:13.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 14:02:13.144 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:02:13.154 -08:00 [INF] HTTP POST /connect/token responded 200 in 2461.7261 ms
2021-11-12 14:02:13.156 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 181 - 200 - application/json;+charset=UTF-8 2479.9883ms
2021-11-12 14:02:13.159 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 14:02:13.165 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD6509NV8SR:00000002","TimeStamp":"2021-11-12T22:02:13.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 14:02:13.258 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:02:13.276 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid profile Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid profile Viking.Annotation ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 14:02:13.372 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:02:13.420 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:02:13.470 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:02:13.522 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:02:13.528 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid profile Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****-jqg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD6509NV8SR:00000002","TimeStamp":"2021-11-12T22:02:13.0000000Z","ProcessId":26632,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 14:02:13.551 -08:00 [INF] HTTP POST /connect/token responded 200 in 676.9270 ms
2021-11-12 14:02:13.554 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156 - 200 - application/json;+charset=UTF-8 682.6054ms
2021-11-12 14:02:16.332 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - -
2021-11-12 14:02:16.454 -08:00 [ERR] HTTP GET /Resources/UserPermissions?id=RC1 responded 500 in 116.7164 ms
System.InvalidOperationException: No authentication handler is registered for the scheme 'BearerToken'. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("BearerToken",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2021-11-12 14:02:16.503 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'BearerToken'. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("BearerToken",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-11-12 14:02:16.521 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - - - 500 - text/plain 189.0647ms
2021-11-12 14:02:29.435 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:02:29.503 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:02:29.511 -08:00 [INF] Removing 0 grants
2021-11-12 14:02:29.565 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:02:29.572 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:02:59.624 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:02:59.682 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:02:59.686 -08:00 [INF] Removing 0 grants
2021-11-12 14:02:59.735 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:02:59.741 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:03:18.605 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-11-12 14:03:18.612 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:03:18.641 -08:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller IdentityServer.Controllers.HomeController (IdentityServer).
2021-11-12 14:03:18.765 -08:00 [INF] Executing action method IdentityServer.Controllers.HomeController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:03:18.778 -08:00 [INF] Executed action method IdentityServer.Controllers.HomeController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.3767ms.
2021-11-12 14:03:18.833 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:03:19.094 -08:00 [INF] Executed ViewResult - view Index executed in 266.1996ms.
2021-11-12 14:03:19.099 -08:00 [INF] Executed action IdentityServer.Controllers.HomeController.Index (IdentityServer) in 453.2623ms
2021-11-12 14:03:19.100 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:03:19.102 -08:00 [INF] HTTP GET / responded 200 in 491.4800 ms
2021-11-12 14:03:19.109 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 503.9407ms
2021-11-12 14:03:19.163 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - -
2021-11-12 14:03:19.168 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/fonts/glyphicons-halflings-regular.woff2 - -
2021-11-12 14:03:19.185 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon.ico - -
2021-11-12 14:03:19.233 -08:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\favicon.ico'
2021-11-12 14:03:19.233 -08:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.css'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\bootstrap\dist\css\bootstrap.css'
2021-11-12 14:03:19.233 -08:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/fonts/glyphicons-halflings-regular.woff2'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\bootstrap\dist\fonts\glyphicons-halflings-regular.woff2'
2021-11-12 14:03:19.234 -08:00 [INF] HTTP GET /favicon.ico responded 200 in 37.1373 ms
2021-11-12 14:03:19.236 -08:00 [INF] HTTP GET /lib/bootstrap/dist/css/bootstrap.css responded 200 in 64.8851 ms
2021-11-12 14:03:19.244 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - - - 0 152767 text/css 81.2082ms
2021-11-12 14:03:19.242 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon.ico - - - 0 32038 image/x-icon 57.4671ms
2021-11-12 14:03:19.238 -08:00 [INF] HTTP GET /lib/bootstrap/dist/fonts/glyphicons-halflings-regular.woff2 responded 200 in 59.7220 ms
2021-11-12 14:03:19.251 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/fonts/glyphicons-halflings-regular.woff2 - - - 0 18028 font/woff2 83.8595ms
2021-11-12 14:03:21.955 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login - -
2021-11-12 14:03:21.962 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:03:21.984 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:03:22.040 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:03:22.074 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:03:22.089 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 45.3997ms.
2021-11-12 14:03:22.104 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:03:22.280 -08:00 [INF] Executed ViewResult - view Login executed in 177.5416ms.
2021-11-12 14:03:22.282 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 293.3715ms
2021-11-12 14:03:22.286 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:03:22.289 -08:00 [INF] HTTP GET /Account/Login responded 200 in 332.6841 ms
2021-11-12 14:03:22.311 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login - - - 200 - text/html;+charset=utf-8 357.1030ms
2021-11-12 14:03:23.342 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 236
2021-11-12 14:03:23.348 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:03:23.359 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:03:23.368 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:03:23.433 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:03:23.438 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:03:23.486 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:03:23.584 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:03:23.645 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:03:23.710 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:03:23.757 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:03:23.787 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:03:23.791 -08:00 [INF] User logged in.
2021-11-12 14:03:23.797 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 361.3992ms.
2021-11-12 14:03:23.809 -08:00 [INF] Executing RedirectResult, redirecting to /.
2021-11-12 14:03:23.815 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 441.1976ms
2021-11-12 14:03:23.819 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:03:23.822 -08:00 [INF] HTTP POST /Account/Login responded 302 in 477.1739 ms
2021-11-12 14:03:23.825 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login application/x-www-form-urlencoded 236 - 302 0 - 482.3453ms
2021-11-12 14:03:23.830 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-11-12 14:03:23.837 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:03:23.839 -08:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller IdentityServer.Controllers.HomeController (IdentityServer).
2021-11-12 14:03:23.866 -08:00 [INF] Executing action method IdentityServer.Controllers.HomeController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:03:23.868 -08:00 [INF] Executed action method IdentityServer.Controllers.HomeController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0302ms.
2021-11-12 14:03:23.874 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:03:23.903 -08:00 [INF] Executed ViewResult - view Index executed in 28.5093ms.
2021-11-12 14:03:23.904 -08:00 [INF] Executed action IdentityServer.Controllers.HomeController.Index (IdentityServer) in 61.9887ms
2021-11-12 14:03:23.906 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:03:23.908 -08:00 [INF] HTTP GET / responded 200 in 76.7818 ms
2021-11-12 14:03:23.911 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 80.2890ms
2021-11-12 14:03:25.600 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:03:25.604 -08:00 [ERR] HTTP GET /Resources responded 500 in 2.7027 ms
System.InvalidOperationException: No authentication handler is registered for the scheme 'BearerToken'. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("BearerToken",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2021-11-12 14:03:25.617 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme 'BearerToken'. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("BearerToken",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-11-12 14:03:25.668 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 500 - text/html;+charset=utf-8 67.5923ms
2021-11-12 14:03:29.758 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:03:29.818 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:03:29.839 -08:00 [INF] Removing 0 grants
2021-11-12 14:03:29.891 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:03:29.896 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:03:59.903 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:03:59.950 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:03:59.955 -08:00 [INF] Removing 0 grants
2021-11-12 14:04:00.000 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:04:00.004 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:04:30.014 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:04:30.063 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:04:30.068 -08:00 [INF] Removing 0 grants
2021-11-12 14:04:30.113 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:04:30.118 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:05:04.319 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:05:05.344 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:05.431 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:05.480 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:05.525 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:05.588 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:05:05.642 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:05:06.311 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:05:06.521 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:05:06.795 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:06.840 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:06.886 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:06.932 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:06.979 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:05:06.982 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:05:07.394 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:05:07.443 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:05:07.460 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:05:07.672 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:05:11.369 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:05:13.426 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:05:13.434 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:05:13.436 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:05:13.445 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:05:13.449 -08:00 [INF] HTTP GET /Resources responded 302 in 2069.1916 ms
2021-11-12 14:05:13.465 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 2098.4355ms
2021-11-12 14:05:13.466 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:05:13.491 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:13.533 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:13.644 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:13.660 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:05:13.668 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 15.0005ms.
2021-11-12 14:05:13.709 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:05:14.009 -08:00 [INF] Executed ViewResult - view Login executed in 302.8735ms.
2021-11-12 14:05:14.013 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 472.1314ms
2021-11-12 14:05:14.016 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:14.019 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 541.3168 ms
2021-11-12 14:05:14.026 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 560.0021ms
2021-11-12 14:05:14.042 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:05:14.043 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:05:14.043 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:05:14.043 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:05:14.043 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:05:14.052 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:05:14.052 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:05:14.052 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:05:14.055 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:05:14.057 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:05:14.059 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 14.2733 ms
2021-11-12 14:05:14.060 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 8.3514 ms
2021-11-12 14:05:14.061 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 13.8781 ms
2021-11-12 14:05:14.062 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 7.2240 ms
2021-11-12 14:05:14.063 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 6.0226 ms
2021-11-12 14:05:14.065 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 22.4081ms
2021-11-12 14:05:14.074 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 30.8179ms
2021-11-12 14:05:14.076 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 33.7199ms
2021-11-12 14:05:14.080 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 36.4088ms
2021-11-12 14:05:14.084 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 40.8094ms
2021-11-12 14:05:17.154 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:05:17.172 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:17.178 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:17.199 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:17.201 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:05:17.202 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1569ms.
2021-11-12 14:05:17.207 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:05:17.212 -08:00 [INF] Executed ViewResult - view Login executed in 4.7748ms.
2021-11-12 14:05:17.215 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 34.2814ms
2021-11-12 14:05:17.218 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:17.224 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 67.7251 ms
2021-11-12 14:05:17.228 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 74.0665ms
2021-11-12 14:05:17.234 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:05:17.236 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:05:17.236 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:05:17.236 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:05:17.236 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:05:17.240 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:05:17.242 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:05:17.243 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:05:17.244 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:05:17.245 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:05:17.246 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 6.6639 ms
2021-11-12 14:05:17.247 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 5.6092 ms
2021-11-12 14:05:17.248 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 5.5638 ms
2021-11-12 14:05:17.253 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 8.5355 ms
2021-11-12 14:05:17.254 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 8.4032 ms
2021-11-12 14:05:17.255 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 21.0120ms
2021-11-12 14:05:17.258 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 21.8767ms
2021-11-12 14:05:17.259 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 23.8029ms
2021-11-12 14:05:17.262 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 25.1943ms
2021-11-12 14:05:17.267 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 30.4106ms
2021-11-12 14:05:18.620 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-11-12 14:05:18.623 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:05:18.625 -08:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller IdentityServer.Controllers.HomeController (IdentityServer).
2021-11-12 14:05:18.647 -08:00 [INF] Executing action method IdentityServer.Controllers.HomeController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:18.653 -08:00 [INF] Executed action method IdentityServer.Controllers.HomeController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.3493ms.
2021-11-12 14:05:18.656 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:05:18.664 -08:00 [INF] Executed ViewResult - view Index executed in 8.7294ms.
2021-11-12 14:05:18.667 -08:00 [INF] Executed action IdentityServer.Controllers.HomeController.Index (IdentityServer) in 39.0729ms
2021-11-12 14:05:18.674 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:05:18.676 -08:00 [INF] HTTP GET / responded 200 in 53.7513 ms
2021-11-12 14:05:18.678 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 58.2235ms
2021-11-12 14:05:20.282 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:05:20.286 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:05:20.289 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:05:20.290 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:05:20.291 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:05:20.293 -08:00 [INF] HTTP GET /Resources responded 302 in 8.4588 ms
2021-11-12 14:05:20.295 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 12.4360ms
2021-11-12 14:05:20.297 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:05:20.301 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:20.305 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:20.329 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:20.332 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:05:20.335 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.9157ms.
2021-11-12 14:05:20.339 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:05:20.342 -08:00 [INF] Executed ViewResult - view Login executed in 2.8909ms.
2021-11-12 14:05:20.344 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 32.5585ms
2021-11-12 14:05:20.347 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:20.349 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 48.8811 ms
2021-11-12 14:05:20.355 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 58.3083ms
2021-11-12 14:05:21.612 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:05:21.619 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:05:21.620 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:21.626 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:21.679 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:21.687 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:05:21.827 -08:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:05:22.062 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:05:22.162 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:05:22.224 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:05:22.280 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:05:22.312 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:05:22.317 -08:00 [INF] User logged in.
2021-11-12 14:05:22.324 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 642.4907ms.
2021-11-12 14:05:22.333 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:05:22.339 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 707.9759ms
2021-11-12 14:05:22.342 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:22.353 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 736.3251 ms
2021-11-12 14:05:22.365 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 752.8653ms
2021-11-12 14:05:22.368 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:05:22.373 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:05:22.376 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:05:22.377 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:05:22.378 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:05:22.380 -08:00 [INF] HTTP GET /Resources responded 302 in 7.8485 ms
2021-11-12 14:05:22.384 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 16.1759ms
2021-11-12 14:05:22.388 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:05:22.393 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:22.394 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:22.418 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:22.421 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:05:22.422 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0332ms.
2021-11-12 14:05:22.423 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:05:22.426 -08:00 [INF] Executed ViewResult - view Login executed in 2.0638ms.
2021-11-12 14:05:22.430 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.5375ms
2021-11-12 14:05:22.433 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:22.437 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 44.4716 ms
2021-11-12 14:05:22.439 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 51.4040ms
2021-11-12 14:05:24.508 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:05:24.510 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:05:24.511 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:24.513 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:24.540 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:24.578 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:05:24.631 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:05:24.689 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:05:24.742 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:05:24.792 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:05:24.840 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:05:24.844 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:05:24.845 -08:00 [INF] User logged in.
2021-11-12 14:05:24.846 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 302.0713ms.
2021-11-12 14:05:24.848 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:05:24.849 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 331.6175ms
2021-11-12 14:05:24.852 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:24.856 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 346.2179 ms
2021-11-12 14:05:24.859 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 351.4045ms
2021-11-12 14:05:24.863 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:05:24.865 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:05:24.867 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:05:24.868 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:05:24.869 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:05:24.872 -08:00 [INF] HTTP GET /Resources responded 302 in 7.3389 ms
2021-11-12 14:05:24.873 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 10.8006ms
2021-11-12 14:05:24.875 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:05:24.878 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:24.879 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:05:24.906 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:24.909 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:05:24.910 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0584ms.
2021-11-12 14:05:24.911 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:05:24.914 -08:00 [INF] Executed ViewResult - view Login executed in 2.9495ms.
2021-11-12 14:05:24.919 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 36.5014ms
2021-11-12 14:05:24.923 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:05:24.925 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 47.1149 ms
2021-11-12 14:05:24.928 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 53.0620ms
2021-11-12 14:05:39.384 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:05:40.199 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:40.305 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:40.355 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:40.400 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:40.461 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:05:40.531 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:05:41.366 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:05:41.558 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:05:41.856 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:41.905 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:41.953 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:05:42.002 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:05:42.060 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:05:42.066 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:05:42.576 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:05:42.633 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:05:42.652 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:05:42.953 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:05:44.138 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-11-12 14:05:44.275 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:05:44.300 -08:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller IdentityServer.Controllers.HomeController (IdentityServer).
2021-11-12 14:05:44.400 -08:00 [INF] Executing action method IdentityServer.Controllers.HomeController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:05:44.411 -08:00 [INF] Executed action method IdentityServer.Controllers.HomeController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.305ms.
2021-11-12 14:05:44.460 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:05:44.716 -08:00 [INF] Executed ViewResult - view Index executed in 258.6704ms.
2021-11-12 14:05:44.721 -08:00 [INF] Executed action IdentityServer.Controllers.HomeController.Index (IdentityServer) in 412.8247ms
2021-11-12 14:05:44.726 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.HomeController.Index (IdentityServer)'
2021-11-12 14:05:44.732 -08:00 [INF] HTTP GET / responded 200 in 581.4493 ms
2021-11-12 14:05:44.744 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 200 - text/html;+charset=utf-8 608.5897ms
2021-11-12 14:05:44.769 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:05:44.770 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/images/VikingBanner1.jpg - -
2021-11-12 14:05:44.769 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:05:44.770 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/images/NetworkBanner.png - -
2021-11-12 14:05:44.770 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:05:44.779 -08:00 [INF] The file /images/VikingBanner1.jpg was not modified
2021-11-12 14:05:44.779 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:05:44.781 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:05:44.784 -08:00 [INF] The file /images/NetworkBanner.png was not modified
2021-11-12 14:05:44.787 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:05:44.790 -08:00 [INF] HTTP GET /images/VikingBanner1.jpg responded 304 in 13.5492 ms
2021-11-12 14:05:44.790 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 18.3765 ms
2021-11-12 14:05:44.791 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 10.4860 ms
2021-11-12 14:05:44.792 -08:00 [INF] HTTP GET /images/NetworkBanner.png responded 304 in 8.8561 ms
2021-11-12 14:05:44.795 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 7.9646 ms
2021-11-12 14:05:44.797 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/images/VikingBanner1.jpg - - - 304 - image/jpeg 27.0332ms
2021-11-12 14:05:44.799 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 29.4218ms
2021-11-12 14:05:44.801 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 31.8521ms
2021-11-12 14:05:44.804 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/images/NetworkBanner.png - - - 304 - image/png 34.3990ms
2021-11-12 14:05:44.810 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 40.6987ms
2021-11-12 14:05:46.343 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:06:08.063 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:06:08.073 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:06:08.076 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:06:08.082 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:06:08.085 -08:00 [INF] HTTP GET /Resources responded 302 in 21739.2003 ms
2021-11-12 14:06:08.091 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 21748.2067ms
2021-11-12 14:06:08.094 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:06:08.111 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:08.128 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:06:08.177 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:06:08.191 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:06:08.192 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 12.9882ms.
2021-11-12 14:06:08.195 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:06:08.277 -08:00 [INF] Executed ViewResult - view Login executed in 82.9134ms.
2021-11-12 14:06:08.287 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 155.5073ms
2021-11-12 14:06:08.291 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:08.294 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 198.6387 ms
2021-11-12 14:06:08.297 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 203.0797ms
2021-11-12 14:06:13.057 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:06:13.191 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:06:13.213 -08:00 [INF] Removing 0 grants
2021-11-12 14:06:13.270 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:06:13.275 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:06:34.049 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 14:06:34.056 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 14:06:34.074 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:34.272 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:34.432 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 380.9405 ms
2021-11-12 14:06:34.440 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 390.6528ms
2021-11-12 14:06:34.506 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 14:06:34.509 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 14:06:34.536 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 27.7766 ms
2021-11-12 14:06:34.541 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 34.8176ms
2021-11-12 14:06:34.633 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156
2021-11-12 14:06:34.649 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 14:06:34.714 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:34.769 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:34.819 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD65296QMIC:00000002","TimeStamp":"2021-11-12T22:06:34.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 14:06:34.988 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:35.092 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:06:35.144 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:35.231 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:06:35.326 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 14:06:35.350 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD65296QMIC:00000002","TimeStamp":"2021-11-12T22:06:35.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 14:06:35.426 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:06:35.440 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid profile Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid profile Viking.Annotation ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 14:06:35.548 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:06:35.636 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:06:35.718 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:06:35.774 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:06:35.958 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid profile Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****njIA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD65296QMIC:00000002","TimeStamp":"2021-11-12T22:06:35.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 14:06:35.991 -08:00 [INF] HTTP POST /connect/token responded 200 in 1355.8595 ms
2021-11-12 14:06:35.994 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 156 - 200 - application/json;+charset=UTF-8 1360.9207ms
2021-11-12 14:06:36.016 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - -
2021-11-12 14:06:36.211 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2021-11-12 14:06:36.214 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-11-12 14:06:36.216 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:36.263 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:36.269 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 56.4209 ms
2021-11-12 14:06:36.271 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 60.8096ms
2021-11-12 14:06:36.395 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2021-11-12 14:06:36.398 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-11-12 14:06:36.399 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.7991 ms
2021-11-12 14:06:36.416 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 21.0033ms
2021-11-12 14:06:36.482 -08:00 [INF] Successfully validated the token.
2021-11-12 14:06:36.518 -08:00 [INF] Start processing HTTP request GET "https://identity.connectomes.utah.edu/.well-known/openid-configuration"
2021-11-12 14:06:36.524 -08:00 [INF] Sending HTTP request GET "https://identity.connectomes.utah.edu/.well-known/openid-configuration"
2021-11-12 14:06:38.187 -08:00 [INF] Received HTTP response headers after 1658.2904ms - 200
2021-11-12 14:06:38.191 -08:00 [INF] End processing HTTP request after 1676.9975ms - 200
2021-11-12 14:06:38.210 -08:00 [INF] Start processing HTTP request GET "https://identity.connectomes.utah.edu/.well-known/openid-configuration/jwks"
2021-11-12 14:06:38.212 -08:00 [INF] Sending HTTP request GET "https://identity.connectomes.utah.edu/.well-known/openid-configuration/jwks"
2021-11-12 14:06:38.340 -08:00 [INF] Received HTTP response headers after 128.2723ms - 200
2021-11-12 14:06:38.342 -08:00 [INF] End processing HTTP request after 131.6041ms - 200
2021-11-12 14:06:38.379 -08:00 [INF] Start processing HTTP request POST "https://identity.connectomes.utah.edu/connect/introspect"
2021-11-12 14:06:38.381 -08:00 [INF] Sending HTTP request POST "https://identity.connectomes.utah.edu/connect/introspect"
2021-11-12 14:06:38.564 -08:00 [INF] Received HTTP response headers after 182.5309ms - 401
2021-11-12 14:06:38.567 -08:00 [INF] End processing HTTP request after 187.5945ms - 401
2021-11-12 14:06:38.576 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2021-11-12 14:06:38.582 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2021-11-12 14:06:38.589 -08:00 [INF] Authorization was successful.
2021-11-12 14:06:38.590 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer)'
2021-11-12 14:06:38.599 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UserPermissions(System.String, System.String) on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:06:38.652 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer) - Validation state: "Valid"
2021-11-12 14:06:38.752 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:38.815 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__id_0
2021-11-12 14:06:38.868 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2021-11-12 14:06:38.946 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2021-11-12 14:06:39.035 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2021-11-12 14:06:39.096 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceId_0='25', @__UserId_1='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE ([g].[ResourceId] = @__ResourceId_0) AND ([g].[UserId] = @__UserId_1)
2021-11-12 14:06:39.163 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__ResourceId_0='25'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE ([g].[ResourceId] = @__ResourceId_0) AND (([g].[ResourceId] = @__ResourceId_0) AND [g].[GroupId] IN (CAST(-1 AS bigint), CAST(1 AS bigint), CAST(21 AS bigint), CAST(32 AS bigint)))
2021-11-12 14:06:39.170 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer), returned result Microsoft.AspNetCore.Mvc.JsonResult in 516.1566ms.
2021-11-12 14:06:39.181 -08:00 [INF] Executing JsonResult, writing value of type 'System.Linq.Enumerable+SelectEnumerableIterator`2[[<>f__AnonymousType34`4[[System.Int64, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], IdentityServer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-11-12 14:06:39.199 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer) in 595.9987ms
2021-11-12 14:06:39.204 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.UserPermissions (IdentityServer)'
2021-11-12 14:06:39.213 -08:00 [INF] HTTP GET /Resources/UserPermissions?id=RC1 responded 200 in 3194.9869 ms
2021-11-12 14:06:39.216 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/Resources/UserPermissions?id=RC1 - - - 200 - application/json;+charset=utf-8 3199.4308ms
2021-11-12 14:06:43.326 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:06:43.374 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:06:43.378 -08:00 [INF] Removing 0 grants
2021-11-12 14:06:43.424 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:06:43.430 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:06:48.712 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 181
2021-11-12 14:06:48.716 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-11-12 14:06:48.724 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:48.775 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:48.782 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMD65296QMIF:00000002","TimeStamp":"2021-11-12T22:06:48.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-11-12 14:06:48.839 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] IN (N'RC1', N'RC1', N'RC1')
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:48.890 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__scope_ScopeName_0='Annotate' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:06:48.942 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Read' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:06:48.989 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__scope_ScopeName_0='Review' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:06:49.038 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2021-11-12 14:06:49.095 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE EXISTS (
    SELECT 1
    FROM [Resource] AS [r1]
    WHERE [r1].[ResourceTypeId] IN (N'Volume', N'Volume', N'Volume') AND ([r1].[Name] = [r].[Name]))
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2021-11-12 14:06:49.151 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:06:49.163 -08:00 [INF] Credentials validated for username: jamesan
2021-11-12 14:06:49.165 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMD65296QMIF:00000002","TimeStamp":"2021-11-12T22:06:49.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-11-12 14:06:49.222 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:06:49.282 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:06:49.350 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__PermissionId_0='Annotate' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:06:49.402 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:06:49.450 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:06:49.501 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__PermissionId_0='Read' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:06:49.556 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceName_0='RC1' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:06:49.607 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__context_Result_ValidatedRequest_UserName_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__context_Result_ValidatedRequest_UserName_0
2021-11-12 14:06:49.657 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__PermissionId_0='Review' (Size = 450), @__ResourceId_1='25', @__UserId_2='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetUsers] AS [a]
        INNER JOIN [GrantedUserPermissions] AS [g] ON [a].[Id] = [g].[UserId]
        WHERE (([g].[PermissionId] = @__PermissionId_0) AND ([g].[ResourceId] = @__ResourceId_1)) AND ([g].[UserId] = @__UserId_2)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2021-11-12 14:06:49.709 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2021-11-12 14:06:49.715 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid RC1.Annotate RC1.Read RC1.Review Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation RC1.Annotate RC1.Read RC1.Review ","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2021-11-12 14:06:49.778 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:06:49.827 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:06:49.878 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:06:49.926 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:06:49.933 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid RC1.Annotate RC1.Read RC1.Review Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****TQQw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMD65296QMIF:00000002","TimeStamp":"2021-11-12T22:06:49.0000000Z","ProcessId":35896,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-11-12 14:06:49.956 -08:00 [INF] HTTP POST /connect/token responded 200 in 1240.3978 ms
2021-11-12 14:06:49.960 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 181 - 200 - application/json;+charset=UTF-8 1248.7497ms
2021-11-12 14:06:57.042 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:06:57.046 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:06:57.052 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:57.063 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:06:57.109 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:06:57.114 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:06:57.158 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:06:57.222 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:06:57.274 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:06:57.320 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:06:57.372 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:06:57.391 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:06:57.395 -08:00 [INF] User logged in.
2021-11-12 14:06:57.397 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 285.0152ms.
2021-11-12 14:06:57.399 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:06:57.400 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 332.4922ms
2021-11-12 14:06:57.404 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:57.406 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 361.8458 ms
2021-11-12 14:06:57.410 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 367.9762ms
2021-11-12 14:06:57.414 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:06:57.418 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:06:57.420 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:06:57.421 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:06:57.423 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:06:57.426 -08:00 [INF] HTTP GET /Resources responded 302 in 10.2033 ms
2021-11-12 14:06:57.428 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 13.8987ms
2021-11-12 14:06:57.430 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:06:57.434 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:57.436 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:06:57.462 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:06:57.465 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:06:57.467 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.0428ms.
2021-11-12 14:06:57.469 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:06:57.473 -08:00 [INF] Executed ViewResult - view Login executed in 4.4815ms.
2021-11-12 14:06:57.475 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 33.7625ms
2021-11-12 14:06:57.479 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:06:57.485 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 50.8225 ms
2021-11-12 14:06:57.488 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 57.4617ms
2021-11-12 14:07:03.428 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 295
2021-11-12 14:07:03.431 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:07:03.432 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:07:03.433 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:07:03.455 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:07:03.462 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:07:03.510 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:07:03.564 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:07:03.611 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:07:03.658 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:07:03.705 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:07:03.717 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:07:03.718 -08:00 [INF] User logged in.
2021-11-12 14:07:03.719 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 257.5856ms.
2021-11-12 14:07:03.721 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:07:03.722 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 286.3732ms
2021-11-12 14:07:03.729 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:07:03.730 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 299.6908 ms
2021-11-12 14:07:03.732 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 295 - 302 0 - 304.1913ms
2021-11-12 14:07:03.734 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:07:03.735 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:07:03.737 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:07:03.738 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:07:03.740 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:07:03.742 -08:00 [INF] HTTP GET /Resources responded 302 in 6.6172 ms
2021-11-12 14:07:03.745 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 10.6541ms
2021-11-12 14:07:03.747 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:07:03.749 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:07:03.750 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:07:03.774 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:07:03.778 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:07:03.779 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1673ms.
2021-11-12 14:07:03.782 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:07:03.785 -08:00 [INF] Executed ViewResult - view Login executed in 3.7336ms.
2021-11-12 14:07:03.790 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 37.3842ms
2021-11-12 14:07:03.792 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:07:03.794 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 45.8603 ms
2021-11-12 14:07:03.797 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 50.5803ms
2021-11-12 14:07:13.449 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:07:13.497 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:07:13.504 -08:00 [INF] Removing 0 grants
2021-11-12 14:07:13.554 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:07:13.561 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:07:43.562 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:07:43.613 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:07:43.616 -08:00 [INF] Removing 0 grants
2021-11-12 14:07:43.660 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:07:43.665 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:08:13.673 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:08:13.724 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:08:13.728 -08:00 [INF] Removing 0 grants
2021-11-12 14:08:13.773 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:08:13.777 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:08:26.155 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:08:26.157 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:08:26.159 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:26.161 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:08:26.185 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:08:26.188 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:08:26.237 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:08:26.292 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:08:26.343 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:08:26.394 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:08:26.446 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:08:26.451 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:08:26.452 -08:00 [INF] User logged in.
2021-11-12 14:08:26.452 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 265.1008ms.
2021-11-12 14:08:26.455 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:08:26.456 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 290.2053ms
2021-11-12 14:08:26.457 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:26.459 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 301.8514 ms
2021-11-12 14:08:26.461 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 306.1434ms
2021-11-12 14:08:26.466 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:08:26.468 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:08:26.473 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:08:26.474 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:08:26.475 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:08:26.476 -08:00 [INF] HTTP GET /Resources responded 302 in 8.0751 ms
2021-11-12 14:08:26.478 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 12.1124ms
2021-11-12 14:08:26.489 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:08:26.491 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:26.493 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:08:26.518 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:08:26.521 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:08:26.522 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.4342ms.
2021-11-12 14:08:26.524 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:08:26.526 -08:00 [INF] Executed ViewResult - view Login executed in 2.2367ms.
2021-11-12 14:08:26.527 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 27.6733ms
2021-11-12 14:08:26.530 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:26.536 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 45.0429 ms
2021-11-12 14:08:26.538 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 48.8186ms
2021-11-12 14:08:29.173 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:08:29.190 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:08:29.193 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:29.196 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:08:29.219 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:08:29.224 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:08:29.273 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:08:29.332 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:08:29.379 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:08:29.429 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:08:29.490 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:08:29.495 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:08:29.496 -08:00 [INF] User logged in.
2021-11-12 14:08:29.498 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 273.983ms.
2021-11-12 14:08:29.505 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:08:29.507 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 307.0989ms
2021-11-12 14:08:29.508 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:29.510 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 320.4103 ms
2021-11-12 14:08:29.513 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 339.8233ms
2021-11-12 14:08:29.515 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:08:29.517 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:08:29.520 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:08:29.521 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:08:29.522 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:08:29.523 -08:00 [INF] HTTP GET /Resources responded 302 in 7.6925 ms
2021-11-12 14:08:29.525 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 10.6794ms
2021-11-12 14:08:29.527 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:08:29.530 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:29.535 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:08:29.557 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:08:29.559 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:08:29.560 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0599ms.
2021-11-12 14:08:29.568 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:08:29.572 -08:00 [INF] Executed ViewResult - view Login executed in 4.0608ms.
2021-11-12 14:08:29.573 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 35.2458ms
2021-11-12 14:08:29.575 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:08:29.579 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 49.5604 ms
2021-11-12 14:08:29.582 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 54.6287ms
2021-11-12 14:08:43.783 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:08:43.830 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:08:43.834 -08:00 [INF] Removing 0 grants
2021-11-12 14:08:43.878 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:08:43.883 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:09:11.506 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:09:11.511 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:09:11.512 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:09:11.513 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:09:11.537 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:09:11.540 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:09:11.588 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:09:11.643 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:09:11.693 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:09:11.740 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:09:11.786 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:09:11.790 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:09:11.791 -08:00 [INF] User logged in.
2021-11-12 14:09:11.792 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 252.1121ms.
2021-11-12 14:09:11.794 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:09:11.795 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 277.0512ms
2021-11-12 14:09:11.797 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:09:11.799 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 288.7223 ms
2021-11-12 14:09:11.803 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 296.5522ms
2021-11-12 14:09:11.810 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:10:11.167 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:10:11.187 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:10:11.223 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:11.224 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:10:11.226 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:11.227 -08:00 [INF] HTTP GET /Resources responded 302 in 59414.8436 ms
2021-11-12 14:10:11.229 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 59419.6839ms
2021-11-12 14:10:11.239 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:10:11.239 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:10:11.243 -08:00 [INF] Removing 0 grants
2021-11-12 14:10:11.245 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:11.248 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:11.289 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:11.290 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:10:11.291 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:10:11.295 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:10:11.297 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 5.9837ms.
2021-11-12 14:10:11.300 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:10:11.302 -08:00 [INF] Executed ViewResult - view Login executed in 2.2575ms.
2021-11-12 14:10:11.304 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 45.3172ms
2021-11-12 14:10:11.306 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:11.308 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 62.7068 ms
2021-11-12 14:10:11.310 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 70.2501ms
2021-11-12 14:10:14.484 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:10:14.506 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:10:14.507 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:14.508 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:14.548 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:14.555 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:10:14.602 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:10:14.657 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:10:14.705 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:10:14.754 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:10:14.804 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:10:14.811 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:10:14.812 -08:00 [INF] User logged in.
2021-11-12 14:10:14.814 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 258.9532ms.
2021-11-12 14:10:14.817 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:10:14.819 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 305.1614ms
2021-11-12 14:10:14.823 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:14.827 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 321.6406 ms
2021-11-12 14:10:14.830 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 345.5446ms
2021-11-12 14:10:14.835 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:10:14.836 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:10:14.838 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:14.843 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:10:14.845 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:14.847 -08:00 [INF] HTTP GET /Resources responded 302 in 10.9842 ms
2021-11-12 14:10:14.848 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 13.9100ms
2021-11-12 14:10:14.851 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:10:14.854 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:14.858 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:14.889 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:14.891 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:10:14.893 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.2924ms.
2021-11-12 14:10:14.895 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:10:14.898 -08:00 [INF] Executed ViewResult - view Login executed in 2.8135ms.
2021-11-12 14:10:14.899 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 38.6331ms
2021-11-12 14:10:14.905 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:14.908 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 55.5815 ms
2021-11-12 14:10:14.911 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 60.2100ms
2021-11-12 14:10:18.907 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:10:18.910 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:10:18.914 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:18.915 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:18.937 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:18.943 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:10:18.990 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:10:19.046 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:10:19.097 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:10:19.145 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:10:19.194 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:10:19.198 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:10:19.199 -08:00 [INF] User logged in.
2021-11-12 14:10:19.200 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 257.6944ms.
2021-11-12 14:10:19.202 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:10:19.203 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 284.8838ms
2021-11-12 14:10:19.207 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:19.208 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 298.7741 ms
2021-11-12 14:10:19.210 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 303.1798ms
2021-11-12 14:10:19.214 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:10:35.522 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:10:41.701 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:10:43.240 -08:00 [INF] Executed DbCommand (1,533ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:10:43.854 -08:00 [INF] Removing 0 grants
2021-11-12 14:10:46.471 -08:00 [INF] Executed DbCommand (2,615ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:10:46.471 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:46.480 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:10:46.484 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:10:46.487 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:46.489 -08:00 [INF] HTTP GET /Resources responded 302 in 27274.0036 ms
2021-11-12 14:10:46.491 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 27277.4312ms
2021-11-12 14:10:46.494 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:10:46.496 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:46.499 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:46.527 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:46.532 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:10:46.533 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0615ms.
2021-11-12 14:10:46.536 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:10:46.538 -08:00 [INF] Executed ViewResult - view Login executed in 2.2464ms.
2021-11-12 14:10:46.539 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 37.1466ms
2021-11-12 14:10:46.546 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:46.551 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 55.2344 ms
2021-11-12 14:10:46.553 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 59.1022ms
2021-11-12 14:10:52.661 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:10:52.663 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:10:52.664 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:52.665 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:52.688 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:52.691 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:10:52.740 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:10:52.796 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:10:52.845 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:10:52.895 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:10:52.942 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:10:52.946 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:10:52.947 -08:00 [INF] User logged in.
2021-11-12 14:10:52.947 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 256.5489ms.
2021-11-12 14:10:52.949 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:10:52.950 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 282.8117ms
2021-11-12 14:10:52.952 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:52.953 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 290.6356 ms
2021-11-12 14:10:52.958 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 297.4714ms
2021-11-12 14:10:52.962 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:10:55.643 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:10:55.645 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:55.647 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:10:55.649 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:10:55.651 -08:00 [INF] HTTP GET /Resources responded 302 in 2687.4292 ms
2021-11-12 14:10:55.653 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 2690.7021ms
2021-11-12 14:10:55.659 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:10:55.662 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:55.666 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:10:55.689 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:10:55.692 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:10:55.693 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.4808ms.
2021-11-12 14:10:55.695 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:10:55.698 -08:00 [INF] Executed ViewResult - view Login executed in 2.8869ms.
2021-11-12 14:10:55.701 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.8229ms
2021-11-12 14:10:55.705 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:10:55.708 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 46.1256 ms
2021-11-12 14:10:55.712 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 52.8343ms
2021-11-12 14:11:16.493 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:11:16.540 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:11:16.546 -08:00 [INF] Removing 0 grants
2021-11-12 14:11:16.591 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:11:16.597 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:11:46.607 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:11:46.658 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:11:46.664 -08:00 [INF] Removing 0 grants
2021-11-12 14:11:46.709 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:11:46.715 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:11:47.001 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:11:47.003 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:11:47.004 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:47.005 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:11:47.007 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:47.011 -08:00 [INF] HTTP GET /Resources responded 302 in 8.1325 ms
2021-11-12 14:11:47.013 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 11.9839ms
2021-11-12 14:11:47.014 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:11:47.016 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:47.018 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:47.038 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:47.041 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:11:47.042 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1245ms.
2021-11-12 14:11:47.045 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:11:47.048 -08:00 [INF] Executed ViewResult - view Login executed in 3.2571ms.
2021-11-12 14:11:47.050 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 28.3237ms
2021-11-12 14:11:47.052 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:47.056 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 39.7206 ms
2021-11-12 14:11:47.059 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 44.5327ms
2021-11-12 14:11:48.972 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:11:48.974 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:11:48.975 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:48.978 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:11:48.981 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:48.983 -08:00 [INF] HTTP GET /Resources responded 302 in 8.9086 ms
2021-11-12 14:11:48.985 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 12.9371ms
2021-11-12 14:11:48.997 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:11:49.002 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:49.003 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:49.023 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:49.028 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:11:49.031 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 3.7109ms.
2021-11-12 14:11:49.033 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:11:49.035 -08:00 [INF] Executed ViewResult - view Login executed in 1.7825ms.
2021-11-12 14:11:49.036 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.9244ms
2021-11-12 14:11:49.039 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:49.043 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 42.0153 ms
2021-11-12 14:11:49.046 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 48.8798ms
2021-11-12 14:11:49.964 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:11:49.970 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:11:49.971 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:49.973 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:49.997 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:50.001 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:11:50.050 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:11:50.106 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:11:50.168 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:11:50.217 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:11:50.264 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:11:50.268 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:11:50.269 -08:00 [INF] User logged in.
2021-11-12 14:11:50.270 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 268.8526ms.
2021-11-12 14:11:50.272 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:11:50.273 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 296.9266ms
2021-11-12 14:11:50.274 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:50.275 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 305.8831 ms
2021-11-12 14:11:50.280 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 315.9462ms
2021-11-12 14:11:50.283 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:11:50.284 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:11:50.285 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:50.286 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:11:50.287 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:50.288 -08:00 [INF] HTTP GET /Resources responded 302 in 4.6275 ms
2021-11-12 14:11:50.290 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 7.2162ms
2021-11-12 14:11:50.292 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:11:50.295 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:50.297 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:50.319 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:50.322 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:11:50.323 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1818ms.
2021-11-12 14:11:50.325 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:11:50.327 -08:00 [INF] Executed ViewResult - view Login executed in 2.448ms.
2021-11-12 14:11:50.329 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 27.6274ms
2021-11-12 14:11:50.334 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:50.335 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 40.9166 ms
2021-11-12 14:11:50.340 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 48.3659ms
2021-11-12 14:11:53.982 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:11:53.984 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:11:53.985 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:53.987 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:54.007 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:54.010 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:11:54.059 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:11:54.117 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:11:54.162 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:11:54.216 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:11:54.263 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:11:54.275 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:11:54.275 -08:00 [INF] User logged in.
2021-11-12 14:11:54.277 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 266.5911ms.
2021-11-12 14:11:54.279 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:11:54.280 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 290.5657ms
2021-11-12 14:11:54.282 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:54.283 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 299.1058 ms
2021-11-12 14:11:54.285 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 302.9868ms
2021-11-12 14:11:54.288 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:11:54.290 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:11:54.292 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:54.293 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:11:54.294 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:11:54.296 -08:00 [INF] HTTP GET /Resources responded 302 in 6.0927 ms
2021-11-12 14:11:54.298 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 302 0 - 10.1190ms
2021-11-12 14:11:54.300 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - -
2021-11-12 14:11:54.301 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:54.303 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:11:54.324 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:11:54.327 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:11:54.330 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.9566ms.
2021-11-12 14:11:54.332 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:11:54.334 -08:00 [INF] Executed ViewResult - view Login executed in 1.9654ms.
2021-11-12 14:11:54.336 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 29.2502ms
2021-11-12 14:11:54.338 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:11:54.340 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources responded 200 in 38.9701 ms
2021-11-12 14:11:54.343 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources - - - 200 - text/html;+charset=utf-8 43.3625ms
2021-11-12 14:12:16.733 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:12:16.794 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:12:16.800 -08:00 [INF] Removing 0 grants
2021-11-12 14:12:16.863 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:12:16.867 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:17:43.895 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:17:45.124 -08:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:17:45.238 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:17:45.295 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:17:45.342 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:17:45.410 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:17:45.479 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:17:46.253 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:17:46.410 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:17:46.710 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:17:46.759 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:17:46.806 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:17:46.867 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:17:46.919 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:17:46.923 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:17:47.325 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:17:47.378 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:17:59.787 -08:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: idsrv
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.ValidateAsync(IServiceProvider services, ILogger logger)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.Validate(IApplicationBuilder app)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.UseIdentityServer(IApplicationBuilder app, IdentityServerMiddlewareOptions options)
   at IdentityServer.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Startup.cs:line 392
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
2021-11-12 14:18:14.980 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:18:15.843 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:18:15.939 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:18:15.990 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:18:16.040 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:18:16.105 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:18:16.153 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:18:16.850 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:18:17.028 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:18:17.348 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:18:17.404 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:18:17.465 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:18:17.525 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:18:17.588 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:18:17.599 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:18:18.236 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:18:18.298 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:19:01.916 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:19:02.862 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:02.951 -08:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:03.034 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:03.087 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:03.148 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:19:03.200 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:19:03.993 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:19:04.215 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:19:04.529 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:04.590 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:04.642 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:04.688 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:04.742 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:19:04.745 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:19:05.196 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:19:05.256 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:19:10.823 -08:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Identity.Application
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.ValidateAsync(IServiceProvider services, ILogger logger)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.Validate(IApplicationBuilder app)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.UseIdentityServer(IApplicationBuilder app, IdentityServerMiddlewareOptions options)
   at IdentityServer.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Startup.cs:line 392
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
2021-11-12 14:19:31.785 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:19:32.596 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:32.689 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:32.744 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:32.796 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:32.859 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:19:32.918 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:19:33.625 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:19:33.797 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:19:34.105 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:34.155 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:34.205 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:19:34.261 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:19:34.323 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:19:34.329 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:19:34.837 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:19:34.910 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:20:18.895 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:20:19.792 -08:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:20:19.891 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:20:19.947 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:20:20.293 -08:00 [INF] Executed DbCommand (345ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:20:20.355 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:20:20.410 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:20:20.932 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:20:21.066 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:20:21.364 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:20:21.416 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:20:21.472 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:20:21.527 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:20:21.585 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:20:21.595 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:20:22.062 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:20:22.112 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:20:22.132 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:20:22.322 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:20:33.164 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279
2021-11-12 14:20:33.183 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:20:33.294 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:33.344 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:33.485 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:33.493 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:20:33.636 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:20:33.878 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:20:33.982 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:20:34.044 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:20:34.110 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:20:34.158 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:20:34.164 -08:00 [INF] User logged in.
2021-11-12 14:20:34.179 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 683.3038ms.
2021-11-12 14:20:34.195 -08:00 [INF] Executing RedirectResult, redirecting to /Resources.
2021-11-12 14:20:34.213 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 852.0543ms
2021-11-12 14:20:34.220 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:34.236 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources responded 302 in 1056.5513 ms
2021-11-12 14:20:34.270 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:20:34.276 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:20:34.280 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources application/x-www-form-urlencoded 279 - 302 0 - 1118.4714ms
2021-11-12 14:20:34.282 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:20:34.308 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:34.343 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:20:34.452 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:20:34.503 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 191.9994ms.
2021-11-12 14:20:34.557 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:20:34.717 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.725 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.729 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.732 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.735 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.739 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.742 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.745 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.748 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.752 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.754 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.757 -08:00 [INF] Authorization was successful.
2021-11-12 14:20:34.863 -08:00 [INF] Executed ViewResult - view Index executed in 318.1529ms.
2021-11-12 14:20:34.866 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 576.4849ms
2021-11-12 14:20:34.869 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:20:34.871 -08:00 [INF] HTTP GET /Resources responded 200 in 599.3673 ms
2021-11-12 14:20:34.879 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 608.8605ms
2021-11-12 14:20:34.904 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - -
2021-11-12 14:20:34.904 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/css/site.css - -
2021-11-12 14:20:34.906 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:20:34.906 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:20:34.904 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:20:34.925 -08:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.css was not modified
2021-11-12 14:20:34.925 -08:00 [INF] The file /css/site.css was not modified
2021-11-12 14:20:34.925 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:20:34.925 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:20:34.927 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:20:34.929 -08:00 [INF] HTTP GET /lib/bootstrap/dist/css/bootstrap.css responded 304 in 11.0122 ms
2021-11-12 14:20:34.930 -08:00 [INF] HTTP GET /css/site.css responded 304 in 9.8158 ms
2021-11-12 14:20:34.931 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 7.6949 ms
2021-11-12 14:20:34.932 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 6.8770 ms
2021-11-12 14:20:34.933 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 5.9235 ms
2021-11-12 14:20:34.935 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - - - 304 - text/css 31.0866ms
2021-11-12 14:20:34.940 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/css/site.css - - - 304 - text/css 36.4300ms
2021-11-12 14:20:34.943 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 36.8881ms
2021-11-12 14:20:34.945 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 39.3749ms
2021-11-12 14:20:34.948 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 43.8664ms
2021-11-12 14:20:42.651 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:20:42.715 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:20:42.721 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:42.723 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:20:42.724 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:42.728 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 74.6571 ms
2021-11-12 14:20:42.730 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 79.2914ms
2021-11-12 14:20:42.733 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:20:42.737 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:42.743 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:42.765 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:42.772 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:20:42.775 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 6.6507ms.
2021-11-12 14:20:42.777 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:20:42.862 -08:00 [INF] Executed ViewResult - view Login executed in 85.4668ms.
2021-11-12 14:20:42.873 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 126.9529ms
2021-11-12 14:20:42.876 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:42.879 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 144.7918 ms
2021-11-12 14:20:42.886 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 153.0647ms
2021-11-12 14:20:45.655 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:20:45.658 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:20:45.659 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:45.661 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:45.684 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:45.686 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:20:45.737 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:20:45.796 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:20:45.850 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:20:45.903 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:20:45.971 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:20:45.975 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:20:45.976 -08:00 [INF] User logged in.
2021-11-12 14:20:45.977 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 290.9315ms.
2021-11-12 14:20:45.979 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:20:45.980 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 316.5802ms
2021-11-12 14:20:45.986 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:45.988 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 330.6089 ms
2021-11-12 14:20:45.991 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 335.8432ms
2021-11-12 14:20:45.994 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:20:45.999 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:20:46.003 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:46.004 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:20:46.005 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:46.006 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 10.1885 ms
2021-11-12 14:20:46.008 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 14.8187ms
2021-11-12 14:20:46.011 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:20:46.015 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:46.018 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:46.039 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:46.043 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:20:46.044 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1523ms.
2021-11-12 14:20:46.045 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:20:46.049 -08:00 [INF] Executed ViewResult - view Login executed in 3.5462ms.
2021-11-12 14:20:46.051 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.5414ms
2021-11-12 14:20:46.054 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:46.056 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 41.1005 ms
2021-11-12 14:20:46.061 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 50.6744ms
2021-11-12 14:20:46.942 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:20:46.945 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:20:46.946 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:46.947 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:46.970 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:46.975 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:20:47.024 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:20:47.080 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:20:47.142 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:20:47.194 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:20:47.249 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:20:47.255 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:20:47.256 -08:00 [INF] User logged in.
2021-11-12 14:20:47.257 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 282.0425ms.
2021-11-12 14:20:47.259 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:20:47.260 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 309.171ms
2021-11-12 14:20:47.262 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:47.263 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 318.6349 ms
2021-11-12 14:20:47.269 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 327.0356ms
2021-11-12 14:20:47.273 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:20:47.276 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:20:47.277 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:47.278 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:20:47.279 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:20:47.283 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 7.9284 ms
2021-11-12 14:20:47.284 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 11.7059ms
2021-11-12 14:20:47.286 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:20:47.288 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:47.290 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:20:47.312 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:20:47.315 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:20:47.317 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.4794ms.
2021-11-12 14:20:47.320 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:20:47.323 -08:00 [INF] Executed ViewResult - view Login executed in 3.3779ms.
2021-11-12 14:20:47.327 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 33.9652ms
2021-11-12 14:20:47.330 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:20:47.332 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 44.4989 ms
2021-11-12 14:20:47.335 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 48.7249ms
2021-11-12 14:20:52.397 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:20:52.473 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:20:52.480 -08:00 [INF] Removing 0 grants
2021-11-12 14:20:52.537 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:20:52.542 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:21:05.788 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:21:05.790 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:21:05.792 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:21:05.815 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:21:05.818 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:21:05.869 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:21:05.874 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 55.9133ms.
2021-11-12 14:21:05.875 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:21:05.879 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.881 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.885 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.888 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.894 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.897 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.901 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.907 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.911 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.915 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.920 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.924 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:05.926 -08:00 [INF] Executed ViewResult - view Index executed in 50.2264ms.
2021-11-12 14:21:05.927 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 129.754ms
2021-11-12 14:21:05.930 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:21:05.935 -08:00 [INF] HTTP GET /Resources responded 200 in 145.2977 ms
2021-11-12 14:21:05.937 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 149.7306ms
2021-11-12 14:21:07.080 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:21:07.083 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:21:07.085 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:21:07.109 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:21:07.112 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:21:07.113 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.6012ms.
2021-11-12 14:21:07.116 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:21:07.119 -08:00 [INF] Executed ViewResult - view Login executed in 3.1475ms.
2021-11-12 14:21:07.121 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 31.6285ms
2021-11-12 14:21:07.123 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:21:07.129 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 46.6719 ms
2021-11-12 14:21:07.134 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 53.9644ms
2021-11-12 14:21:08.336 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:21:08.337 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:21:08.339 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:21:08.367 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:21:08.371 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:21:08.426 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:21:08.435 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 64.2336ms.
2021-11-12 14:21:08.438 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:21:08.444 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.447 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.454 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.458 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.462 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.465 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.472 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.476 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.480 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.485 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.489 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.493 -08:00 [INF] Authorization was successful.
2021-11-12 14:21:08.497 -08:00 [INF] Executed ViewResult - view Index executed in 58.2745ms.
2021-11-12 14:21:08.499 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 155.8156ms
2021-11-12 14:21:08.503 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:21:08.507 -08:00 [INF] HTTP GET /Resources responded 200 in 169.9785 ms
2021-11-12 14:21:08.512 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 176.6173ms
2021-11-12 14:21:14.239 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:21:14.242 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:21:14.243 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:21:14.244 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:21:14.246 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:21:14.247 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 5.4186 ms
2021-11-12 14:21:14.248 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 9.5055ms
2021-11-12 14:21:14.254 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:21:14.258 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:21:14.261 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:21:14.283 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:21:14.285 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:21:14.286 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.6981ms.
2021-11-12 14:21:14.291 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:21:14.293 -08:00 [INF] Executed ViewResult - view Login executed in 1.9404ms.
2021-11-12 14:21:14.294 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.5613ms
2021-11-12 14:21:14.297 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:21:14.299 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 41.3194 ms
2021-11-12 14:21:14.305 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 51.3974ms
2021-11-12 14:21:22.578 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:21:22.642 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:21:22.646 -08:00 [INF] Removing 0 grants
2021-11-12 14:21:22.698 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:21:22.703 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:21:52.710 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:21:52.769 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:21:52.774 -08:00 [INF] Removing 0 grants
2021-11-12 14:21:52.819 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:21:52.822 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:22:22.829 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:22:22.881 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:22:22.884 -08:00 [INF] Removing 0 grants
2021-11-12 14:22:22.932 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:22:22.940 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:22:48.818 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:22:48.820 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:22:48.822 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:22:48.823 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:22:48.848 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:22:48.851 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:22:48.898 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:22:48.955 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:22:49.006 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:22:49.057 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:22:49.105 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:22:49.110 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:22:49.111 -08:00 [INF] User logged in.
2021-11-12 14:22:49.112 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 261.0129ms.
2021-11-12 14:22:49.114 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:22:49.115 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 287.6326ms
2021-11-12 14:22:49.116 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:22:49.121 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 300.6711 ms
2021-11-12 14:22:49.124 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 305.5723ms
2021-11-12 14:22:49.137 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:22:49.139 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:22:49.141 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:22:49.142 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:22:49.144 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:22:49.145 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 6.0134 ms
2021-11-12 14:22:49.146 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 9.8372ms
2021-11-12 14:22:49.149 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:22:49.152 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:22:49.153 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:22:49.175 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:22:49.177 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:22:49.180 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 3.2617ms.
2021-11-12 14:22:49.182 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:22:49.185 -08:00 [INF] Executed ViewResult - view Login executed in 2.5529ms.
2021-11-12 14:22:49.186 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.6336ms
2021-11-12 14:22:49.189 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:22:49.193 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 41.6109 ms
2021-11-12 14:22:49.198 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 49.0457ms
2021-11-12 14:22:52.950 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:22:53.010 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:22:53.015 -08:00 [INF] Removing 0 grants
2021-11-12 14:22:53.065 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:22:53.070 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:23:11.789 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:23:11.792 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:23:11.795 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:23:11.798 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:23:11.825 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:23:11.828 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:23:11.881 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:23:11.948 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:23:12.007 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:23:12.070 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:23:12.126 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:23:12.133 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:23:12.135 -08:00 [INF] User logged in.
2021-11-12 14:23:12.136 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 308.1787ms.
2021-11-12 14:23:12.137 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:23:12.139 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 336.5549ms
2021-11-12 14:23:12.141 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:23:12.146 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 353.8861 ms
2021-11-12 14:23:12.149 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 360.0506ms
2021-11-12 14:23:12.160 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:23:17.354 -08:00 [ERR] HTTP GET /Resources/UserPermissions responded 500 in 5190.8349 ms
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2021-11-12 14:23:17.418 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-11-12 14:23:17.459 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 500 - text/html;+charset=utf-8 5298.4727ms
2021-11-12 14:23:23.079 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:23:23.139 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:23:23.144 -08:00 [INF] Removing 0 grants
2021-11-12 14:23:23.195 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:23:23.199 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:23:29.427 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:23:55.732 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:24:17.490 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:24:18.103 -08:00 [INF] Executed DbCommand (614ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:24:18.103 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:24:18.108 -08:00 [INF] Removing 0 grants
2021-11-12 14:24:18.109 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:24:18.114 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:24:18.117 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 48686.7438 ms
2021-11-12 14:24:18.120 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 48692.2155ms
2021-11-12 14:24:18.122 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:24:18.125 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:18.126 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:24:18.152 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:24:18.155 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:24:18.156 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:24:18.156 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.5773ms.
2021-11-12 14:24:18.163 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:24:18.166 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:24:18.170 -08:00 [INF] Executed ViewResult - view Login executed in 4.1073ms.
2021-11-12 14:24:18.171 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 39.0772ms
2021-11-12 14:24:18.177 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:18.180 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 55.3212 ms
2021-11-12 14:24:18.183 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 60.6087ms
2021-11-12 14:24:18.195 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:24:18.197 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:24:18.208 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:24:18.208 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:24:18.208 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:24:18.208 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:24:18.210 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:24:18.212 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:24:18.213 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 5.6870 ms
2021-11-12 14:24:18.215 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:24:18.217 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:24:18.220 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 9.9510 ms
2021-11-12 14:24:18.221 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 9.2009 ms
2021-11-12 14:24:18.223 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 28.6110ms
2021-11-12 14:24:18.225 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 10.3193 ms
2021-11-12 14:24:18.226 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 10.1217 ms
2021-11-12 14:24:18.228 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 31.4274ms
2021-11-12 14:24:18.231 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 22.9815ms
2021-11-12 14:24:18.238 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 29.9927ms
2021-11-12 14:24:18.241 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 33.3547ms
2021-11-12 14:24:19.880 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:24:19.883 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:24:19.885 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:19.886 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:24:19.917 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:24:19.919 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:24:19.976 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:24:20.036 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:24:20.084 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:24:20.133 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:24:20.185 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:24:20.190 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:24:20.191 -08:00 [INF] User logged in.
2021-11-12 14:24:20.192 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 273.1182ms.
2021-11-12 14:24:20.194 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:24:20.195 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 303.4939ms
2021-11-12 14:24:20.197 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:20.202 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 319.1636 ms
2021-11-12 14:24:20.205 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 324.9147ms
2021-11-12 14:24:20.208 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:24:21.126 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:24:21.707 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:24:21.709 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:24:21.711 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:24:21.712 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 1501.9420 ms
2021-11-12 14:24:21.714 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 1506.5894ms
2021-11-12 14:24:21.746 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:24:21.749 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:21.770 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:24:21.827 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:24:21.828 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:24:21.829 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0247ms.
2021-11-12 14:24:21.832 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:24:21.834 -08:00 [INF] Executed ViewResult - view Login executed in 1.9155ms.
2021-11-12 14:24:21.835 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 61.5525ms
2021-11-12 14:24:21.837 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:21.841 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 92.3052 ms
2021-11-12 14:24:21.843 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 98.4032ms
2021-11-12 14:24:25.340 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:24:25.342 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:24:25.343 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:25.345 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:24:25.372 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:24:25.374 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:24:25.424 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:24:25.484 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:24:25.534 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:24:25.582 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:24:25.630 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:24:25.634 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:24:25.635 -08:00 [INF] User logged in.
2021-11-12 14:24:25.635 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 261.3509ms.
2021-11-12 14:24:25.637 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:24:25.639 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 286.036ms
2021-11-12 14:24:25.640 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:25.642 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 299.9450 ms
2021-11-12 14:24:25.647 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 307.3140ms
2021-11-12 14:24:25.651 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:24:55.405 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:24:56.284 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:24:56.375 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:24:56.428 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:24:56.486 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:24:56.556 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:24:56.619 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:24:57.160 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:24:57.293 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:24:57.594 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:24:57.638 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:24:57.684 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:24:57.728 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:24:57.785 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:24:57.788 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:24:58.221 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:24:58.275 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:24:58.295 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:24:58.550 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:24:59.149 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:24:59.168 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:24:59.272 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:24:59.316 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:24:59.472 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:24:59.481 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:24:59.637 -08:00 [INF] Executed DbCommand (97ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:24:59.870 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:24:59.967 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:25:00.034 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:25:00.092 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:25:00.137 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:25:00.142 -08:00 [INF] User logged in.
2021-11-12 14:25:00.158 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 675.7808ms.
2021-11-12 14:25:00.176 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:25:00.196 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 864.3133ms
2021-11-12 14:25:00.201 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:00.218 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 1056.3488 ms
2021-11-12 14:25:00.253 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:25:00.272 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 1123.6887ms
2021-11-12 14:25:00.347 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:25:00.361 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:00.363 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:25:00.364 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:00.367 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:25:00.370 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 114.2919 ms
2021-11-12 14:25:00.373 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 119.4595ms
2021-11-12 14:25:00.378 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:25:00.398 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:00.405 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:25:00.430 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:00.438 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:25:00.440 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 6.2507ms.
2021-11-12 14:25:00.493 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:25:00.782 -08:00 [INF] Executed ViewResult - view Login executed in 299.4152ms.
2021-11-12 14:25:00.785 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 375.117ms
2021-11-12 14:25:00.789 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:00.792 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 409.4565 ms
2021-11-12 14:25:00.800 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 421.3563ms
2021-11-12 14:25:04.131 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:25:04.135 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:25:04.138 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:04.139 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:25:04.162 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:04.195 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:25:04.264 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:25:04.325 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:25:04.375 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:25:04.427 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:25:04.755 -08:00 [INF] Executed DbCommand (324ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:25:04.760 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:25:04.761 -08:00 [INF] User logged in.
2021-11-12 14:25:04.762 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 597.6116ms.
2021-11-12 14:25:04.764 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:25:04.765 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 623.7176ms
2021-11-12 14:25:04.769 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:04.770 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 634.9855 ms
2021-11-12 14:25:04.774 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 642.4235ms
2021-11-12 14:25:04.776 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:25:04.779 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:25:04.780 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:04.782 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:25:04.783 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:04.785 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:25:04.786 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 8.6835 ms
2021-11-12 14:25:04.790 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 14.2420ms
2021-11-12 14:25:04.792 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:25:04.795 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:04.796 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:25:04.818 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:04.822 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:25:04.823 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0676ms.
2021-11-12 14:25:04.825 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:25:04.830 -08:00 [INF] Executed ViewResult - view Login executed in 5.2215ms.
2021-11-12 14:25:04.834 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 34.9712ms
2021-11-12 14:25:04.837 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:04.840 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 45.7120 ms
2021-11-12 14:25:04.843 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 51.3649ms
2021-11-12 14:25:12.741 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:25:12.743 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:25:12.747 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:25:12.768 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:12.774 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:25:12.877 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:25:12.928 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 155.8052ms.
2021-11-12 14:25:12.933 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:25:12.983 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:12.990 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:12.994 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:12.997 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.000 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.003 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.006 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.011 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.014 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.016 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.020 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.023 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:13.027 -08:00 [INF] Executed ViewResult - view Index executed in 96.4955ms.
2021-11-12 14:25:13.029 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 279.6455ms
2021-11-12 14:25:13.032 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:25:13.035 -08:00 [INF] HTTP GET /Resources responded 200 in 292.1622 ms
2021-11-12 14:25:13.043 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 301.9341ms
2021-11-12 14:25:17.163 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:25:17.168 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:25:17.171 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:17.172 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:25:17.173 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:17.174 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:25:17.175 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 8.3318 ms
2021-11-12 14:25:17.177 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 14.3610ms
2021-11-12 14:25:17.179 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:25:17.181 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:17.184 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:25:17.208 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:17.211 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:25:17.212 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0909ms.
2021-11-12 14:25:17.214 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:25:17.216 -08:00 [INF] Executed ViewResult - view Login executed in 2.9478ms.
2021-11-12 14:25:17.220 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.4635ms
2021-11-12 14:25:17.223 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:17.225 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 44.3665 ms
2021-11-12 14:25:17.229 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 49.7811ms
2021-11-12 14:25:28.624 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:25:28.692 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:25:28.698 -08:00 [INF] Removing 0 grants
2021-11-12 14:25:28.751 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:25:28.758 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:25:36.322 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:25:36.328 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:25:36.331 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:25:36.363 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:36.366 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:25:36.416 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:25:36.424 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 57.6367ms.
2021-11-12 14:25:36.426 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:25:36.429 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.432 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.435 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.437 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.440 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.443 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.446 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.449 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.451 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.455 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.458 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.460 -08:00 [INF] Authorization was successful.
2021-11-12 14:25:36.462 -08:00 [INF] Executed ViewResult - view Index executed in 36.6507ms.
2021-11-12 14:25:36.465 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 129.3999ms
2021-11-12 14:25:36.468 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:25:36.471 -08:00 [INF] HTTP GET /Resources responded 200 in 145.7544 ms
2021-11-12 14:25:36.473 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 150.3485ms
2021-11-12 14:25:40.291 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:25:44.334 -08:00 [ERR] HTTP GET /Resources/UserPermissions responded 500 in 4040.2119 ms
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2021-11-12 14:25:44.390 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-11-12 14:25:44.434 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 500 - text/html;+charset=utf-8 4143.0655ms
2021-11-12 14:25:55.011 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:25:58.532 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:25:59.294 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:25:59.296 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:25:59.299 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:25:59.301 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:25:59.302 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 4287.8411 ms
2021-11-12 14:25:59.305 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 4294.2175ms
2021-11-12 14:25:59.317 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:25:59.321 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:59.323 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:25:59.351 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:25:59.353 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:25:59.355 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.6757ms.
2021-11-12 14:25:59.358 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:25:59.360 -08:00 [INF] Executed ViewResult - view Login executed in 2.8013ms.
2021-11-12 14:25:59.362 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 33.6163ms
2021-11-12 14:25:59.366 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:25:59.367 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:25:59.374 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 54.0522 ms
2021-11-12 14:25:59.383 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 66.3001ms
2021-11-12 14:25:59.696 -08:00 [INF] Executed DbCommand (324ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:25:59.700 -08:00 [INF] Removing 0 grants
2021-11-12 14:25:59.749 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:25:59.755 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:26:01.349 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:26:01.350 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:26:01.352 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:01.354 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:01.383 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:01.386 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:26:01.445 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:26:01.505 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:26:01.556 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:26:01.610 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:26:01.666 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:26:01.674 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:26:01.674 -08:00 [INF] User logged in.
2021-11-12 14:26:01.675 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 289.8734ms.
2021-11-12 14:26:01.678 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:26:01.680 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 319.9076ms
2021-11-12 14:26:01.683 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:01.686 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 335.2484 ms
2021-11-12 14:26:01.691 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 342.1432ms
2021-11-12 14:26:01.693 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:26:02.700 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:26:03.294 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:26:03.296 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:26:03.298 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:26:03.299 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:26:03.301 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 1606.0094 ms
2021-11-12 14:26:03.303 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 1609.9474ms
2021-11-12 14:26:03.318 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:26:03.322 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:03.323 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:03.356 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:03.358 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:26:03.360 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.8755ms.
2021-11-12 14:26:03.362 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:26:03.365 -08:00 [INF] Executed ViewResult - view Login executed in 2.5752ms.
2021-11-12 14:26:03.366 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 39.8455ms
2021-11-12 14:26:03.381 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:03.385 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 63.4931 ms
2021-11-12 14:26:03.390 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 71.8518ms
2021-11-12 14:26:29.774 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:26:29.831 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:26:29.836 -08:00 [INF] Removing 0 grants
2021-11-12 14:26:29.882 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:26:29.887 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:26:32.031 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:26:32.034 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:26:32.035 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:32.037 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:32.058 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:32.060 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:26:32.114 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:26:32.169 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:26:32.233 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:26:32.294 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:26:32.345 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:26:32.349 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:26:32.350 -08:00 [INF] User logged in.
2021-11-12 14:26:32.351 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 290.9813ms.
2021-11-12 14:26:32.353 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:26:32.354 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 315.0987ms
2021-11-12 14:26:32.360 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:32.362 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 327.7902 ms
2021-11-12 14:26:32.364 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 332.8132ms
2021-11-12 14:26:32.367 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:26:34.145 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:26:35.200 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:26:35.201 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:26:35.203 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:26:35.204 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:26:35.205 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 2836.6562 ms
2021-11-12 14:26:35.208 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 2840.5455ms
2021-11-12 14:26:35.210 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:26:35.212 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:35.214 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:35.247 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:35.249 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:26:35.250 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.4348ms.
2021-11-12 14:26:35.253 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:26:35.255 -08:00 [INF] Executed ViewResult - view Login executed in 2.1772ms.
2021-11-12 14:26:35.256 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 36.2231ms
2021-11-12 14:26:35.259 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:35.261 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 49.3789 ms
2021-11-12 14:26:35.267 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 56.6587ms
2021-11-12 14:26:37.043 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:26:37.045 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:37.048 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:37.074 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:37.078 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:26:37.080 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.4771ms.
2021-11-12 14:26:37.082 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:26:37.085 -08:00 [INF] Executed ViewResult - view Login executed in 2.6189ms.
2021-11-12 14:26:37.088 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 35.835ms
2021-11-12 14:26:37.091 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:37.093 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 48.1059 ms
2021-11-12 14:26:37.098 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 55.8022ms
2021-11-12 14:26:37.103 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:26:37.104 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:26:37.115 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:26:37.114 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:26:37.115 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:26:37.128 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:26:37.128 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:26:37.130 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:26:37.131 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:26:37.133 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:26:37.135 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 9.5836 ms
2021-11-12 14:26:37.135 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 30.3215 ms
2021-11-12 14:26:37.136 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 6.8966 ms
2021-11-12 14:26:37.137 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 6.6790 ms
2021-11-12 14:26:37.139 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 5.9074 ms
2021-11-12 14:26:37.142 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 37.9701ms
2021-11-12 14:26:37.143 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 40.7491ms
2021-11-12 14:26:37.146 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 30.3615ms
2021-11-12 14:26:37.151 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 36.9783ms
2021-11-12 14:26:37.154 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 38.1528ms
2021-11-12 14:26:39.439 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:26:39.442 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:26:39.443 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:39.444 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:39.466 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:39.469 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:26:39.524 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:26:39.598 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:26:39.656 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:26:39.718 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:26:39.772 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:26:39.777 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:26:39.778 -08:00 [INF] User logged in.
2021-11-12 14:26:39.779 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 310.7911ms.
2021-11-12 14:26:39.782 -08:00 [INF] Executing RedirectResult, redirecting to /Resources/UserPermissions.
2021-11-12 14:26:39.784 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 337.1215ms
2021-11-12 14:26:39.787 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:39.788 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FResources%2FUserPermissions responded 302 in 346.5600 ms
2021-11-12 14:26:39.793 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FResources%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 353.9804ms
2021-11-12 14:26:39.798 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:26:40.471 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:26:41.852 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:26:41.853 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:26:41.855 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:26:41.856 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:26:41.857 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 2057.0026 ms
2021-11-12 14:26:41.859 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 2061.2913ms
2021-11-12 14:26:41.861 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:26:41.865 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:41.870 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:26:41.899 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:26:41.902 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:26:41.903 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.1191ms.
2021-11-12 14:26:41.904 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:26:41.906 -08:00 [INF] Executed ViewResult - view Login executed in 1.846ms.
2021-11-12 14:26:41.908 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 32.229ms
2021-11-12 14:26:41.911 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:26:41.913 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 48.5127 ms
2021-11-12 14:26:41.919 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 58.1894ms
2021-11-12 14:26:59.900 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:26:59.959 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:26:59.981 -08:00 [INF] Removing 0 grants
2021-11-12 14:27:00.043 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:27:00.054 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:27:01.994 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:27:01.997 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:27:01.999 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:27:02.021 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:27:02.025 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:27:02.027 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.4417ms.
2021-11-12 14:27:02.029 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:27:02.031 -08:00 [INF] Executed ViewResult - view Login executed in 1.8546ms.
2021-11-12 14:27:02.032 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 30.2295ms
2021-11-12 14:27:02.034 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:27:02.036 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 39.5979 ms
2021-11-12 14:27:02.043 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 48.4168ms
2021-11-12 14:27:02.054 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:27:02.054 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:27:02.055 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:27:02.054 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:27:02.054 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:27:02.058 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:27:02.059 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:27:02.062 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:27:02.064 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:27:02.065 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:27:02.066 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 8.7596 ms
2021-11-12 14:27:02.067 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 8.1262 ms
2021-11-12 14:27:02.069 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 7.2655 ms
2021-11-12 14:27:02.074 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 10.1994 ms
2021-11-12 14:27:02.076 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 10.7356 ms
2021-11-12 14:27:02.079 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 25.1995ms
2021-11-12 14:27:02.082 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 27.6346ms
2021-11-12 14:27:02.087 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 32.5312ms
2021-11-12 14:27:02.090 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 35.7858ms
2021-11-12 14:27:02.093 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 39.0256ms
2021-11-12 14:27:30.097 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:27:30.152 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:27:30.154 -08:00 [INF] Removing 0 grants
2021-11-12 14:27:30.207 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:27:30.209 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:28:00.227 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:28:00.280 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:28:00.286 -08:00 [INF] Removing 0 grants
2021-11-12 14:28:00.334 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:28:00.339 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:28:30.351 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:28:30.403 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:28:30.406 -08:00 [INF] Removing 0 grants
2021-11-12 14:28:30.458 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:28:30.464 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:28:32.369 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:28:32.373 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:28:32.374 -08:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-11-12 14:28:32.375 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:28:32.376 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:28:32.377 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:28:32.379 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 302 in 7.3085 ms
2021-11-12 14:28:32.382 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 302 0 - 12.6037ms
2021-11-12 14:28:32.384 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - -
2021-11-12 14:28:32.387 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:28:32.389 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:28:32.418 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:28:32.420 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:28:32.422 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.865ms.
2021-11-12 14:28:32.424 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:28:32.431 -08:00 [INF] Executed ViewResult - view Login executed in 6.1912ms.
2021-11-12 14:28:32.432 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 40.9709ms
2021-11-12 14:28:32.435 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:28:32.438 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FResources%2FUserPermissions responded 200 in 51.4811 ms
2021-11-12 14:28:32.445 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - -
2021-11-12 14:28:32.464 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FResources%2FUserPermissions - - - 200 - text/html;+charset=utf-8 80.7070ms
2021-11-12 14:28:32.446 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:28:32.502 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:28:32.446 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/css/site.css - -
2021-11-12 14:28:32.475 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:28:32.478 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:28:32.502 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:28:32.562 -08:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\css\site.css'
2021-11-12 14:28:32.568 -08:00 [INF] Sending file. Request path: '/lib/jquery-validation/dist/jquery.validate.js'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\jquery-validation\dist\jquery.validate.js'
2021-11-12 14:28:32.568 -08:00 [INF] HTTP GET /css/site.css responded 200 in 26.8170 ms
2021-11-12 14:28:32.583 -08:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\js\site.js'
2021-11-12 14:28:32.585 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/css/site.css - - - 200 2102 text/css 138.8750ms
2021-11-12 14:28:32.582 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 200 in 42.7415 ms
2021-11-12 14:28:32.575 -08:00 [INF] Sending file. Request path: '/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\jquery-validation-unobtrusive\jquery.validate.unobtrusive.js'
2021-11-12 14:28:32.584 -08:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.css'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\bootstrap\dist\css\bootstrap.css'
2021-11-12 14:28:32.584 -08:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.js'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\bootstrap\dist\js\bootstrap.js'
2021-11-12 14:28:32.585 -08:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.js'. Physical path: 'C:\src\git\Viking\Servers\IdentityServer\IdentityServer\wwwroot\lib\jquery\dist\jquery.js'
2021-11-12 14:28:32.588 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 200 in 32.5361 ms
2021-11-12 14:28:32.592 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 200 44027 application/javascript 89.8894ms
2021-11-12 14:28:32.597 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 200 in 32.6048 ms
2021-11-12 14:28:32.604 -08:00 [INF] HTTP GET /lib/bootstrap/dist/css/bootstrap.css responded 200 in 127.9793 ms
2021-11-12 14:28:32.606 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 200 in 54.8107 ms
2021-11-12 14:28:32.610 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 200 in 72.0875 ms
2021-11-12 14:28:32.612 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 200 35 application/javascript 134.4198ms
2021-11-12 14:28:32.616 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 200 19033 application/javascript 114.1955ms
2021-11-12 14:28:32.619 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/css/bootstrap.css - - - 200 152767 text/css 173.2077ms
2021-11-12 14:28:32.621 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 200 72084 application/javascript 145.7401ms
2021-11-12 14:28:32.623 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 200 268219 application/javascript 176.3261ms
2021-11-12 14:48:39.679 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:48:41.242 -08:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:48:41.346 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:48:41.417 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:48:41.494 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:48:41.582 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:48:41.656 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:48:42.288 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2021-11-12 14:48:42.429 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:48:42.718 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:48:42.771 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:48:42.817 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2021-11-12 14:48:42.878 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2021-11-12 14:48:42.926 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2021-11-12 14:48:42.930 -08:00 [INF] No migrations were applied. The database is already up to date.
2021-11-12 14:48:43.317 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2021-11-12 14:48:43.367 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2021-11-12 14:48:43.398 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-11-12 14:48:43.594 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-11-12 14:49:13.705 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:49:13.887 -08:00 [INF] Executed DbCommand (86ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:49:13.911 -08:00 [INF] Removing 0 grants
2021-11-12 14:49:13.968 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:49:13.974 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:49:44.070 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:49:44.121 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:49:44.129 -08:00 [INF] Removing 0 grants
2021-11-12 14:49:44.177 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:49:44.181 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:50:02.855 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources/UserPermissions - -
2021-11-12 14:50:02.984 -08:00 [INF] HTTP GET /Resources/UserPermissions responded 404 in 117.2429 ms
2021-11-12 14:50:02.999 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources/UserPermissions - - - 404 0 - 146.3612ms
2021-11-12 14:50:09.319 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 14:50:09.388 -08:00 [ERR] HTTP GET /Api/UserPermissions responded 500 in 66.8221 ms
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2021-11-12 14:50:09.437 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authentication handler is registered for the scheme ''. The registered schemes are: Cookies, Introspection, Bearer, Identity.Application, Identity.External, Identity.TwoFactorRememberMe, Identity.TwoFactorUserId, idsrv, idsrv.external. Did you forget to call AddAuthentication().Add[SomeAuthHandler]("",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.AuthenticateAsync(AuthorizationPolicy policy, HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-11-12 14:50:09.481 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 500 - text/html;+charset=utf-8 161.6991ms
2021-11-12 14:50:14.188 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:50:14.239 -08:00 [INF] Executed DbCommand (47ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:50:14.244 -08:00 [INF] Removing 0 grants
2021-11-12 14:50:14.303 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:50:14.308 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:50:33.733 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 14:50:43.242 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:50:43.468 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:43.470 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:50:43.473 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:43.474 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:50:43.476 -08:00 [INF] HTTP GET /Api/UserPermissions responded 302 in 9741.6554 ms
2021-11-12 14:50:43.479 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 302 0 - 9746.2674ms
2021-11-12 14:50:43.485 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - -
2021-11-12 14:50:43.491 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:43.537 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:50:43.649 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:50:43.665 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:50:43.676 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 16.1944ms.
2021-11-12 14:50:43.724 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:50:44.036 -08:00 [INF] Executed ViewResult - view Login executed in 312.5737ms.
2021-11-12 14:50:44.041 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 496.5952ms
2021-11-12 14:50:44.057 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - -
2021-11-12 14:50:44.058 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - -
2021-11-12 14:50:44.056 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - -
2021-11-12 14:50:44.058 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - -
2021-11-12 14:50:44.057 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - -
2021-11-12 14:50:44.058 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:44.069 -08:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js was not modified
2021-11-12 14:50:44.069 -08:00 [INF] The file /lib/jquery/dist/jquery.js was not modified
2021-11-12 14:50:44.069 -08:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.js was not modified
2021-11-12 14:50:44.071 -08:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.js was not modified
2021-11-12 14:50:44.073 -08:00 [INF] The file /js/site.js was not modified
2021-11-12 14:50:44.075 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FApi%2FUserPermissions responded 200 in 587.3172 ms
2021-11-12 14:50:44.078 -08:00 [INF] HTTP GET /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js responded 304 in 13.8536 ms
2021-11-12 14:50:44.083 -08:00 [INF] HTTP GET /lib/bootstrap/dist/js/bootstrap.js responded 304 in 22.5667 ms
2021-11-12 14:50:44.081 -08:00 [INF] HTTP GET /lib/jquery/dist/jquery.js responded 304 in 14.0576 ms
2021-11-12 14:50:44.084 -08:00 [INF] HTTP GET /lib/jquery-validation/dist/jquery.validate.js responded 304 in 13.7889 ms
2021-11-12 14:50:44.086 -08:00 [INF] HTTP GET /js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA responded 304 in 13.0017 ms
2021-11-12 14:50:44.108 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - - - 200 - text/html;+charset=utf-8 622.5430ms
2021-11-12 14:50:44.110 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js - - - 304 - application/javascript 52.0692ms
2021-11-12 14:50:44.114 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/bootstrap/dist/js/bootstrap.js - - - 304 - application/javascript 57.7038ms
2021-11-12 14:50:44.118 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery/dist/jquery.js - - - 304 - application/javascript 61.4677ms
2021-11-12 14:50:44.123 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/lib/jquery-validation/dist/jquery.validate.js - - - 304 - application/javascript 65.4777ms
2021-11-12 14:50:44.129 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/js/site.js?v=ji3-IxbEzYWjzzLCGkF1KDjrT2jLbbrSYXw-AhMPNIA - - - 304 - application/javascript 71.5039ms
2021-11-12 14:50:44.339 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:50:44.402 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:50:44.406 -08:00 [INF] Removing 0 grants
2021-11-12 14:50:44.455 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:50:44.458 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:50:47.147 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FApi%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:50:47.161 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:50:47.165 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:47.172 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:50:47.231 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:50:47.239 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:50:47.309 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:50:47.563 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:50:47.676 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:50:47.746 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:50:47.812 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:50:47.848 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:50:47.852 -08:00 [INF] User logged in.
2021-11-12 14:50:47.856 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 623.0924ms.
2021-11-12 14:50:47.866 -08:00 [INF] Executing RedirectResult, redirecting to /Api/UserPermissions.
2021-11-12 14:50:47.870 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 694.6417ms
2021-11-12 14:50:47.873 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:47.883 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FApi%2FUserPermissions responded 302 in 724.8678 ms
2021-11-12 14:50:47.894 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 14:50:47.895 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FApi%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 748.6787ms
2021-11-12 14:50:47.900 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:50:47.902 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:47.903 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:50:47.904 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:47.905 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:50:47.906 -08:00 [INF] HTTP GET /Api/UserPermissions responded 302 in 8.1316 ms
2021-11-12 14:50:47.908 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 302 0 - 13.8131ms
2021-11-12 14:50:47.910 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - -
2021-11-12 14:50:47.915 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:47.917 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:50:47.937 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:50:47.940 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:50:47.942 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.7749ms.
2021-11-12 14:50:47.945 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:50:47.950 -08:00 [INF] Executed ViewResult - view Login executed in 5.3249ms.
2021-11-12 14:50:47.952 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 33.6632ms
2021-11-12 14:50:47.956 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:47.959 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FApi%2FUserPermissions responded 200 in 45.0152 ms
2021-11-12 14:50:47.962 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - - - 200 - text/html;+charset=utf-8 51.7245ms
2021-11-12 14:50:49.403 -08:00 [INF] Request starting HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FApi%2FUserPermissions application/x-www-form-urlencoded 279
2021-11-12 14:50:49.405 -08:00 [INF] No CORS policy found for the specified request.
2021-11-12 14:50:49.406 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:49.408 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(IdentityServer.Models.AccountViewModels.LoginViewModel, System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:50:49.430 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:50:49.464 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:50:49.517 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-11-12 14:50:49.583 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-11-12 14:50:49.644 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2021-11-12 14:50:49.703 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2021-11-12 14:50:49.758 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-11-12 14:50:49.764 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-11-12 14:50:49.765 -08:00 [INF] User logged in.
2021-11-12 14:50:49.766 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 331.9595ms.
2021-11-12 14:50:49.768 -08:00 [INF] Executing RedirectResult, redirecting to /Api/UserPermissions.
2021-11-12 14:50:49.772 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 361.1302ms
2021-11-12 14:50:49.774 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:49.775 -08:00 [INF] HTTP POST /Account/Login?returnurl=%2FApi%2FUserPermissions responded 302 in 370.3164 ms
2021-11-12 14:50:49.777 -08:00 [INF] Request finished HTTP/2 POST https://localhost:5001/Account/Login?returnurl=%2FApi%2FUserPermissions application/x-www-form-urlencoded 279 - 302 0 - 374.7867ms
2021-11-12 14:50:49.782 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 14:50:49.785 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:50:49.787 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:49.788 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:50:49.790 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:50:49.791 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:50:49.792 -08:00 [INF] HTTP GET /Api/UserPermissions responded 302 in 8.5694 ms
2021-11-12 14:50:49.794 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 302 0 - 11.5440ms
2021-11-12 14:50:49.796 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - -
2021-11-12 14:50:49.798 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:49.799 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:50:49.824 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:50:49.826 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:50:49.827 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.3143ms.
2021-11-12 14:50:49.830 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:50:49.837 -08:00 [INF] Executed ViewResult - view Login executed in 6.888ms.
2021-11-12 14:50:49.839 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 33.6087ms
2021-11-12 14:50:49.842 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:50:49.844 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FApi%2FUserPermissions responded 200 in 46.0477 ms
2021-11-12 14:50:49.849 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - - - 200 - text/html;+charset=utf-8 52.4720ms
2021-11-12 14:50:57.784 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/Usr - -
2021-11-12 14:50:57.786 -08:00 [INF] HTTP GET /Api/Usr responded 404 in 0.4298 ms
2021-11-12 14:50:57.789 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/Usr - - - 404 0 - 5.4603ms
2021-11-12 14:51:01.342 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 14:51:01.345 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 14:51:01.348 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:51:01.351 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 14:51:01.352 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 14:51:01.353 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 14:51:01.354 -08:00 [INF] HTTP GET /Api/UserPermissions responded 302 in 9.5723 ms
2021-11-12 14:51:01.356 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 302 0 - 13.6606ms
2021-11-12 14:51:01.358 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - -
2021-11-12 14:51:01.360 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:51:01.362 -08:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String) on controller IdentityServer.Controllers.AccountController (IdentityServer).
2021-11-12 14:51:01.388 -08:00 [INF] Executing action method IdentityServer.Controllers.AccountController.Login (IdentityServer) - Validation state: "Valid"
2021-11-12 14:51:01.393 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-11-12 14:51:01.395 -08:00 [INF] Executed action method IdentityServer.Controllers.AccountController.Login (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.5505ms.
2021-11-12 14:51:01.399 -08:00 [INF] Executing ViewResult, running view Login.
2021-11-12 14:51:01.402 -08:00 [INF] Executed ViewResult - view Login executed in 3.424ms.
2021-11-12 14:51:01.404 -08:00 [INF] Executed action IdentityServer.Controllers.AccountController.Login (IdentityServer) in 34.915ms
2021-11-12 14:51:01.406 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.AccountController.Login (IdentityServer)'
2021-11-12 14:51:01.409 -08:00 [INF] HTTP GET /Account/Login?ReturnUrl=%2FApi%2FUserPermissions responded 200 in 49.1121 ms
2021-11-12 14:51:01.414 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Account/Login?ReturnUrl=%2FApi%2FUserPermissions - - - 200 - text/html;+charset=utf-8 56.3697ms
2021-11-12 14:51:14.460 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 14:51:14.508 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 14:51:14.512 -08:00 [INF] Removing 0 grants
2021-11-12 14:51:14.556 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 14:51:14.561 -08:00 [INF] Removing 0 device flow codes
2021-11-12 14:51:14.614 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Resources - -
2021-11-12 14:51:14.616 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:51:14.621 -08:00 [INF] Route matched with {action = "Index", controller = "Resources"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller IdentityServer.Controllers.ResourcesController (IdentityServer).
2021-11-12 14:51:14.647 -08:00 [INF] Executing action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer) - Validation state: "Valid"
2021-11-12 14:51:14.654 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2021-11-12 14:51:14.762 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [r1].[Id], [r1].[Description]
FROM [Resource] AS [r]
LEFT JOIN (
    SELECT [r0].[Id], [r0].[Description], [r0].[Name], [r0].[ParentID], [r0].[ResourceTypeId]
    FROM [Resource] AS [r0]
    WHERE [r0].[ResourceTypeId] = N'OrganizationalUnit'
) AS [t] ON [r].[ParentID] = [t].[Id]
INNER JOIN [ResourceTypes] AS [r1] ON [r].[ResourceTypeId] = [r1].[Id]
2021-11-12 14:51:14.813 -08:00 [INF] Executed action method IdentityServer.Controllers.ResourcesController.Index (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ViewResult in 162.3686ms.
2021-11-12 14:51:14.820 -08:00 [INF] Executing ViewResult, running view Index.
2021-11-12 14:51:14.880 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.891 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.894 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.898 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.901 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.904 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.928 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.932 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.934 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.937 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.941 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.944 -08:00 [INF] Authorization was successful.
2021-11-12 14:51:14.946 -08:00 [INF] Executed ViewResult - view Index executed in 128.5612ms.
2021-11-12 14:51:14.948 -08:00 [INF] Executed action IdentityServer.Controllers.ResourcesController.Index (IdentityServer) in 323.5385ms
2021-11-12 14:51:14.950 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.ResourcesController.Index (IdentityServer)'
2021-11-12 14:51:14.952 -08:00 [INF] HTTP GET /Resources responded 200 in 336.6715 ms
2021-11-12 14:51:14.956 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Resources - - - 200 - text/html;+charset=utf-8 342.8759ms
2021-11-12 14:51:24.838 -08:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Api/UserPermissions - -
2021-11-12 15:32:20.946 -08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-11-12 15:32:20.947 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2021-11-12 15:32:22.649 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 15:32:22.651 -08:00 [INF] AuthenticationScheme: Introspection was challenged.
2021-11-12 15:32:22.653 -08:00 [INF] AuthenticationScheme: Cookies was challenged.
2021-11-12 15:32:22.663 -08:00 [INF] AuthenticationScheme: idsrv was challenged.
2021-11-12 15:32:22.664 -08:00 [INF] HTTP GET /Api/UserPermissions responded 302 in 2457837.0957 ms
2021-11-12 15:32:22.667 -08:00 [INF] Request finished HTTP/2 GET https://localhost:5001/Api/UserPermissions - - - 0 - - 2457841.8533ms
2021-11-12 15:32:23.353 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2021-11-12 15:32:23.355 -08:00 [INF] Removing 0 grants
2021-11-12 15:32:23.401 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2021-11-12 15:32:23.405 -08:00 [INF] Removing 0 device flow codes
