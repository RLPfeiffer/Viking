2022-02-22 17:22:39.282 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:22:40.875 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:22:40.959 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:22:41.019 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:22:41.093 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:22:41.179 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-02-22 17:22:41.196 -08:00 [INF] No migrations were applied. The database is already up to date.
2022-02-22 17:22:41.405 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2022-02-22 17:22:41.453 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:22:42.232 -08:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:22:42.299 -08:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:22:42.380 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:22:42.460 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:22:42.547 -08:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-02-22 17:22:42.551 -08:00 [INF] No migrations were applied. The database is already up to date.
2022-02-22 17:22:42.780 -08:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2022-02-22 17:22:42.806 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-02-22 17:22:42.813 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-02-22 17:22:43.011 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-02-22 17:22:58.288 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:22:58.321 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:22:58.331 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:22:58.515 -08:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:22:58.603 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 308.9904 ms
2022-02-22 17:22:58.607 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 321.0041ms
2022-02-22 17:22:58.652 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:22:58.655 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:22:58.693 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 39.6463 ms
2022-02-22 17:22:58.703 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 50.3275ms
2022-02-22 17:22:58.789 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:22:58.849 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:22:58.887 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:22:58.959 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:22:58.977 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDC39EQLE:00000002","TimeStamp":"2022-02-23T01:22:58.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:22:59.134 -08:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:22:59.279 -08:00 [INF] Executed DbCommand (120ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:22:59.358 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:22:59.455 -08:00 [INF] Executed DbCommand (81ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:22:59.512 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:22:59.535 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDC39EQLE:00000002","TimeStamp":"2022-02-23T01:22:59.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:22:59.655 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:22:59.662 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:22:59.790 -08:00 [INF] Executed DbCommand (95ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:22:59.910 -08:00 [INF] Executed DbCommand (102ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:23:00.006 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:23:00.070 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:23:00.313 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****B7mg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDC39EQLE:00000002","TimeStamp":"2022-02-23T01:23:00.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:23:00.326 -08:00 [INF] HTTP POST /connect/token responded 200 in 1535.6742 ms
2022-02-22 17:23:00.327 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 1537.8301ms
2022-02-22 17:23:00.334 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:23:00.335 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:23:00.380 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:00.462 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:00.558 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:23:00.654 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:23:00.726 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:23:00.815 -08:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:23:00.895 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:23:00.897 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:23:00.898 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 563.7325 ms
2022-02-22 17:23:00.899 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 565.0843ms
2022-02-22 17:23:00.906 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:23:01.131 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:23:01.132 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:23:01.133 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:01.215 -08:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:01.219 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 87.5405 ms
2022-02-22 17:23:01.220 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 89.3161ms
2022-02-22 17:23:01.291 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:23:01.293 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:23:01.294 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.3031 ms
2022-02-22 17:23:01.303 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 11.7913ms
2022-02-22 17:23:01.318 -08:00 [INF] Successfully validated the token.
2022-02-22 17:23:01.334 -08:00 [INF] Start processing HTTP request GET "https://localhost:5001/.well-known/openid-configuration"
2022-02-22 17:23:01.335 -08:00 [INF] Sending HTTP request GET "https://localhost:5001/.well-known/openid-configuration"
2022-02-22 17:23:01.353 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:23:01.358 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:23:01.360 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:01.447 -08:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:01.450 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 96.9940 ms
2022-02-22 17:23:01.462 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 108.9734ms
2022-02-22 17:23:01.464 -08:00 [INF] Received HTTP response headers after 126.7013ms - 200
2022-02-22 17:23:01.465 -08:00 [INF] End processing HTTP request after 133.8744ms - 200
2022-02-22 17:23:01.472 -08:00 [INF] Start processing HTTP request GET "https://localhost:5001/.well-known/openid-configuration/jwks"
2022-02-22 17:23:01.473 -08:00 [INF] Sending HTTP request GET "https://localhost:5001/.well-known/openid-configuration/jwks"
2022-02-22 17:23:01.492 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:23:01.494 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:23:01.495 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 2.1044 ms
2022-02-22 17:23:01.504 -08:00 [INF] Received HTTP response headers after 30.9459ms - 200
2022-02-22 17:23:01.505 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 12.2910ms
2022-02-22 17:23:01.505 -08:00 [INF] End processing HTTP request after 33.038ms - 200
2022-02-22 17:23:01.516 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:01.516 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:01.540 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:23:01.542 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:23:01.547 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:01.646 -08:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:01.649 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000004","TimeStamp":"2022-02-23T01:23:01.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:23:01.654 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:23:01.655 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:23:01.656 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 115.1841 ms
2022-02-22 17:23:01.657 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 116.9539ms
2022-02-22 17:23:01.667 -08:00 [INF] Received HTTP response headers after 150.6859ms - 401
2022-02-22 17:23:01.669 -08:00 [INF] End processing HTTP request after 153.436ms - 401
2022-02-22 17:23:01.673 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:01.674 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:01.679 -08:00 [INF] Authorization was successful.
2022-02-22 17:23:01.680 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:23:01.696 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:23:01.779 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:23:01.785 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.0947ms.
2022-02-22 17:23:01.788 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:23:01.795 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 95.7728ms
2022-02-22 17:23:01.797 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:23:01.798 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 891.7191 ms
2022-02-22 17:23:01.799 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 893.2593ms
2022-02-22 17:23:04.131 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:23:04.136 -08:00 [INF] Successfully validated the token.
2022-02-22 17:23:04.137 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:04.138 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:04.162 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:23:04.164 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:23:04.165 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:04.254 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:04.256 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000005","TimeStamp":"2022-02-23T01:23:04.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:23:04.261 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:23:04.262 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:23:04.262 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 98.7029 ms
2022-02-22 17:23:04.263 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 101.1525ms
2022-02-22 17:23:04.273 -08:00 [INF] Received HTTP response headers after 134.7152ms - 401
2022-02-22 17:23:04.273 -08:00 [INF] End processing HTTP request after 136.1572ms - 401
2022-02-22 17:23:04.274 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:04.275 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:04.276 -08:00 [INF] Authorization was successful.
2022-02-22 17:23:04.276 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:23:04.285 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:23:04.310 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:23:07.013 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:07.566 -08:00 [INF] Executed DbCommand (548ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:23:09.936 -08:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:23:10.020 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:23:10.105 -08:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:23:10.184 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
2022-02-22 17:23:10.804 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) in 6517.8594ms
2022-02-22 17:23:10.805 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:23:10.807 -08:00 [ERR] HTTP GET /api/permissions/Volume responded 500 in 6674.0784 ms
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-02-22 17:23:10.924 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-02-22 17:23:10.961 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - - - 500 - text/plain 6829.2608ms
2022-02-22 17:23:14.234 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:23:14.337 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:23:14.339 -08:00 [INF] Removing 0 grants
2022-02-22 17:23:14.408 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:23:14.411 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:23:17.017 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:23:17.018 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:23:17.020 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:17.081 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:17.083 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 65.8767 ms
2022-02-22 17:23:17.084 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 67.7778ms
2022-02-22 17:23:17.130 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:23:17.132 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:23:17.133 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.4841 ms
2022-02-22 17:23:17.134 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7488ms
2022-02-22 17:23:17.198 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:23:17.199 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:23:17.202 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:17.273 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:17.277 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDC39EQLJ:00000002","TimeStamp":"2022-02-23T01:23:17.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:23:17.340 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:17.409 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:23:17.477 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:17.545 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:23:17.552 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:23:17.553 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDC39EQLJ:00000002","TimeStamp":"2022-02-23T01:23:17.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:23:17.634 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:23:17.636 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:23:17.713 -08:00 [INF] Executed DbCommand (66ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:23:17.780 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:23:17.840 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:23:17.900 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:23:17.904 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****VQCg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDC39EQLJ:00000002","TimeStamp":"2022-02-23T01:23:17.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:23:17.913 -08:00 [INF] HTTP POST /connect/token responded 200 in 714.6443 ms
2022-02-22 17:23:17.915 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 716.4698ms
2022-02-22 17:23:17.923 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:23:17.924 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:23:17.925 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:17.989 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:18.057 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:23:18.128 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:23:18.188 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:23:18.260 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:23:18.320 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:23:18.322 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:23:18.323 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 399.4719 ms
2022-02-22 17:23:18.324 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 400.8769ms
2022-02-22 17:23:18.331 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:23:18.333 -08:00 [INF] Successfully validated the token.
2022-02-22 17:23:18.333 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:18.335 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:18.358 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:23:18.362 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:23:18.363 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:18.424 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:18.426 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000006","TimeStamp":"2022-02-23T01:23:18.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:23:18.431 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:23:18.432 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:23:18.432 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 72.4103 ms
2022-02-22 17:23:18.433 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 75.0362ms
2022-02-22 17:23:18.442 -08:00 [INF] Received HTTP response headers after 107.2493ms - 401
2022-02-22 17:23:18.444 -08:00 [INF] End processing HTTP request after 110.4986ms - 401
2022-02-22 17:23:18.445 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:18.445 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:18.446 -08:00 [INF] Authorization was successful.
2022-02-22 17:23:18.447 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:23:18.448 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:23:18.471 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:23:18.472 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0971ms.
2022-02-22 17:23:18.473 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:23:18.475 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 26.236ms
2022-02-22 17:23:18.477 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:23:18.477 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 146.4470 ms
2022-02-22 17:23:18.479 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 148.0844ms
2022-02-22 17:23:22.977 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:23:22.979 -08:00 [INF] Successfully validated the token.
2022-02-22 17:23:22.980 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:22.981 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:23:23.004 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:23:23.007 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:23:23.008 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:23.082 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:23:23.085 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000007","TimeStamp":"2022-02-23T01:23:23.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:23:23.089 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:23:23.090 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:23:23.091 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 84.2813 ms
2022-02-22 17:23:23.092 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 87.6265ms
2022-02-22 17:23:23.102 -08:00 [INF] Received HTTP response headers after 121.8052ms - 401
2022-02-22 17:23:23.104 -08:00 [INF] End processing HTTP request after 124.3642ms - 401
2022-02-22 17:23:23.105 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:23.105 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:23:23.106 -08:00 [INF] Authorization was successful.
2022-02-22 17:23:23.107 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:23:23.108 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:23:23.130 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:23:26.016 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:23:26.085 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:23:28.461 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:23:28.542 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:23:28.630 -08:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:23:28.710 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
2022-02-22 17:23:48.489 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) in 25379.7526ms
2022-02-22 17:23:48.491 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:23:48.492 -08:00 [ERR] HTTP GET /api/permissions/Volume responded 500 in 25513.9679 ms
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-02-22 17:23:48.504 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:23:48.504 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-02-22 17:23:48.519 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - - - 500 - text/plain 25541.7591ms
2022-02-22 17:23:48.568 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:23:48.570 -08:00 [INF] Removing 0 grants
2022-02-22 17:23:48.628 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:23:48.632 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:24:03.427 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:24:03.428 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:24:03.429 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:03.487 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:03.490 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 62.5509 ms
2022-02-22 17:24:03.491 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 64.2060ms
2022-02-22 17:24:03.536 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:24:03.537 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:24:03.538 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.2865 ms
2022-02-22 17:24:03.539 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.7263ms
2022-02-22 17:24:03.596 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:24:03.602 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:24:03.605 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:03.668 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:03.678 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDC39EQLM:00000002","TimeStamp":"2022-02-23T01:24:03.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:24:03.743 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:03.791 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:24:03.850 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:03.925 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:24:03.928 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:24:03.929 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDC39EQLM:00000002","TimeStamp":"2022-02-23T01:24:03.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:24:04.010 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:24:04.011 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:24:04.062 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:24:04.121 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:24:04.185 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:24:04.227 -08:00 [INF] Executed DbCommand (40ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:24:04.230 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****5BDQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDC39EQLM:00000002","TimeStamp":"2022-02-23T01:24:04.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:24:04.240 -08:00 [INF] HTTP POST /connect/token responded 200 in 643.1751 ms
2022-02-22 17:24:04.242 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 646.1466ms
2022-02-22 17:24:04.251 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:24:04.254 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:24:04.255 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:04.324 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:04.382 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:24:04.446 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:24:04.510 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:24:04.568 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:24:04.616 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:24:04.619 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:24:04.620 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 368.2780 ms
2022-02-22 17:24:04.621 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 370.4975ms
2022-02-22 17:24:04.629 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:24:04.631 -08:00 [INF] Successfully validated the token.
2022-02-22 17:24:04.632 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:24:04.633 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:24:04.655 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:24:04.657 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:24:04.658 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:04.718 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:04.720 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000008","TimeStamp":"2022-02-23T01:24:04.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:24:04.724 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:24:04.725 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:24:04.725 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 68.4863 ms
2022-02-22 17:24:04.726 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 71.5564ms
2022-02-22 17:24:04.735 -08:00 [INF] Received HTTP response headers after 102.1025ms - 401
2022-02-22 17:24:04.736 -08:00 [INF] End processing HTTP request after 103.8992ms - 401
2022-02-22 17:24:04.736 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:24:04.737 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:24:04.738 -08:00 [INF] Authorization was successful.
2022-02-22 17:24:04.738 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:24:04.739 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:24:04.758 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:24:04.759 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0636ms.
2022-02-22 17:24:04.760 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:24:04.761 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 19.9553ms
2022-02-22 17:24:04.762 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:24:04.763 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 132.6558 ms
2022-02-22 17:24:04.765 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 135.2096ms
2022-02-22 17:24:04.765 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:24:04.767 -08:00 [INF] Successfully validated the token.
2022-02-22 17:24:04.767 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:24:04.768 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:24:04.798 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:24:04.800 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:24:04.801 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:04.856 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:24:04.859 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDC39EQLH:00000009","TimeStamp":"2022-02-23T01:24:04.0000000Z","ProcessId":29260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:24:04.864 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:24:04.865 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:24:04.866 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 65.7542 ms
2022-02-22 17:24:04.867 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 68.4005ms
2022-02-22 17:24:04.881 -08:00 [INF] Received HTTP response headers after 113.3047ms - 401
2022-02-22 17:24:04.882 -08:00 [INF] End processing HTTP request after 114.8523ms - 401
2022-02-22 17:24:04.883 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:24:04.883 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:24:04.884 -08:00 [INF] Authorization was successful.
2022-02-22 17:24:04.884 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:24:04.885 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:24:04.905 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:24:07.739 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:24:07.801 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:24:07.865 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:24:07.929 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:24:07.993 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:24:08.052 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
2022-02-22 17:25:10.610 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:25:10.686 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) in 65798.5438ms
2022-02-22 17:25:10.687 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:25:10.689 -08:00 [ERR] HTTP GET /api/permissions/Volume responded 500 in 65922.8558 ms
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-02-22 17:25:10.703 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Query.InvalidIncludePathError': Unable to find navigation 'Volume' specified in string based include path 'Volume'. This exception can be suppressed or logged by passing event ID 'CoreEventId.InvalidIncludePathError' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`2.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam1 arg1, TParam2 arg2)
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.InvalidIncludePathError(IDiagnosticsLogger`1 diagnostics, String navigationChain, String navigationName)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer.Controllers.PermissionsController.UserPermissions(String resourceTypeId) in C:\src\git\Viking\Servers\IdentityServer\IdentityServer\Controllers\PermissionsController.cs:line 110
   at lambda_method467(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-02-22 17:25:10.719 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - - - 500 - text/plain 65953.9810ms
2022-02-22 17:25:10.730 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:25:10.740 -08:00 [INF] Removing 0 grants
2022-02-22 17:25:10.792 -08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:25:10.794 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:25:40.810 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:25:40.873 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:25:40.875 -08:00 [INF] Removing 0 grants
2022-02-22 17:25:40.937 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:25:40.939 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:26:10.953 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:26:11.013 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:26:11.021 -08:00 [INF] Removing 0 grants
2022-02-22 17:26:11.085 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:26:11.088 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:26:41.111 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:26:41.188 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:26:41.201 -08:00 [INF] Removing 0 grants
2022-02-22 17:26:41.262 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:26:41.269 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:27:11.453 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:27:11.506 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:27:11.513 -08:00 [INF] Removing 0 grants
2022-02-22 17:27:11.571 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:27:11.573 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:36:45.057 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:36:45.913 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:36:45.977 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:36:46.035 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:36:46.086 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:36:46.147 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-02-22 17:36:46.162 -08:00 [INF] No migrations were applied. The database is already up to date.
2022-02-22 17:36:46.375 -08:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2022-02-22 17:36:46.422 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:47.015 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:36:47.075 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:36:47.119 -08:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-02-22 17:36:47.162 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-02-22 17:36:47.214 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-02-22 17:36:47.216 -08:00 [INF] No migrations were applied. The database is already up to date.
2022-02-22 17:36:47.407 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[Name] = N'Administrator'
2022-02-22 17:36:47.430 -08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-02-22 17:36:47.439 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-02-22 17:36:47.557 -08:00 [INF] User profile is available. Using 'C:\Users\u0490822\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-02-22 17:36:55.528 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:36:55.553 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:36:55.565 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:55.706 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:55.780 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 246.4509 ms
2022-02-22 17:36:55.783 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 257.2141ms
2022-02-22 17:36:55.829 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:36:55.831 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:36:55.852 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 22.5751 ms
2022-02-22 17:36:55.859 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 30.3376ms
2022-02-22 17:36:55.923 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:36:55.938 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:36:55.972 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:56.039 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:56.060 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDJSQ0OHR:00000002","TimeStamp":"2022-02-23T01:36:56.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:36:56.166 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:56.255 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:36:56.314 -08:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:56.390 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:36:56.435 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:36:56.447 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDJSQ0OHR:00000002","TimeStamp":"2022-02-23T01:36:56.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:36:56.518 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:36:56.529 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:36:56.610 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:36:56.678 -08:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:36:56.746 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:36:56.798 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:36:56.895 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****1oyg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDJSQ0OHR:00000002","TimeStamp":"2022-02-23T01:36:56.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:36:56.908 -08:00 [INF] HTTP POST /connect/token responded 200 in 984.3193 ms
2022-02-22 17:36:56.909 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 986.3002ms
2022-02-22 17:36:56.917 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:36:56.918 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:36:56.962 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:57.027 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:57.106 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:36:57.185 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:36:57.258 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:36:57.321 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:36:57.401 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:36:57.404 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:36:57.406 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 487.9878 ms
2022-02-22 17:36:57.407 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 489.7526ms
2022-02-22 17:36:57.414 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:36:57.561 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:36:57.562 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:36:57.564 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:57.641 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:57.645 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 82.7728 ms
2022-02-22 17:36:57.646 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 84.8001ms
2022-02-22 17:36:57.717 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:36:57.718 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:36:57.719 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.3005 ms
2022-02-22 17:36:57.729 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 12.0197ms
2022-02-22 17:36:57.743 -08:00 [INF] Successfully validated the token.
2022-02-22 17:36:57.759 -08:00 [INF] Start processing HTTP request GET "https://localhost:5001/.well-known/openid-configuration"
2022-02-22 17:36:57.760 -08:00 [INF] Sending HTTP request GET "https://localhost:5001/.well-known/openid-configuration"
2022-02-22 17:36:57.778 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:36:57.783 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:36:57.784 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:57.849 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:57.853 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 74.9294 ms
2022-02-22 17:36:57.865 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 86.9991ms
2022-02-22 17:36:57.867 -08:00 [INF] Received HTTP response headers after 104.4893ms - 200
2022-02-22 17:36:57.868 -08:00 [INF] End processing HTTP request after 111.8124ms - 200
2022-02-22 17:36:57.875 -08:00 [INF] Start processing HTTP request GET "https://localhost:5001/.well-known/openid-configuration/jwks"
2022-02-22 17:36:57.876 -08:00 [INF] Sending HTTP request GET "https://localhost:5001/.well-known/openid-configuration/jwks"
2022-02-22 17:36:57.895 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:36:57.897 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:36:57.898 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 2.0188 ms
2022-02-22 17:36:57.906 -08:00 [INF] Received HTTP response headers after 30.6912ms - 200
2022-02-22 17:36:57.907 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 12.2663ms
2022-02-22 17:36:57.908 -08:00 [INF] End processing HTTP request after 32.7723ms - 200
2022-02-22 17:36:57.918 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:36:57.918 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:36:57.942 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:36:57.943 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:36:57.949 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:58.033 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:58.036 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OHU:00000004","TimeStamp":"2022-02-23T01:36:58.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:36:58.041 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:36:58.042 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:36:58.043 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 100.9522 ms
2022-02-22 17:36:58.044 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 102.7357ms
2022-02-22 17:36:58.054 -08:00 [INF] Received HTTP response headers after 135.3598ms - 401
2022-02-22 17:36:58.055 -08:00 [INF] End processing HTTP request after 136.9343ms - 401
2022-02-22 17:36:58.058 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:36:58.060 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:36:58.065 -08:00 [INF] Authorization was successful.
2022-02-22 17:36:58.066 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:36:58.076 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:36:58.126 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:36:58.131 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.0365ms.
2022-02-22 17:36:58.134 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:36:58.141 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 61.0465ms
2022-02-22 17:36:58.142 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:36:58.143 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 728.9779 ms
2022-02-22 17:36:58.144 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 730.3813ms
2022-02-22 17:36:58.145 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:36:58.148 -08:00 [INF] Successfully validated the token.
2022-02-22 17:36:58.149 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:36:58.150 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:36:58.188 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:36:58.190 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:36:58.191 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:58.257 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:36:58.260 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OHU:00000005","TimeStamp":"2022-02-23T01:36:58.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:36:58.265 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:36:58.265 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:36:58.266 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 75.9693 ms
2022-02-22 17:36:58.267 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 78.5900ms
2022-02-22 17:36:58.276 -08:00 [INF] Received HTTP response headers after 126.3859ms - 401
2022-02-22 17:36:58.277 -08:00 [INF] End processing HTTP request after 127.8318ms - 401
2022-02-22 17:36:58.277 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:36:58.279 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:36:58.280 -08:00 [INF] Authorization was successful.
2022-02-22 17:36:58.281 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:36:58.289 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:36:58.316 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:36:58.319 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:36:58.394 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:36:58.489 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:36:58.578 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:36:58.665 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:36:58.745 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
2022-02-22 17:37:02.233 -08:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
2022-02-22 17:37:02.237 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3920.0001ms.
2022-02-22 17:37:02.238 -08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Int64, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-02-22 17:37:02.244 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) in 3954.1749ms
2022-02-22 17:37:02.245 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:37:02.246 -08:00 [INF] HTTP GET /api/permissions/Volume responded 200 in 4100.6875 ms
2022-02-22 17:37:02.247 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - - - 200 - application/json;+charset=utf-8 4102.1072ms
2022-02-22 17:37:02.254 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1137
2022-02-22 17:37:02.257 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:02.260 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:02.337 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.340 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OHV:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:37:02.410 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.482 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:37:02.489 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:37:02.491 -08:00 [INF] {"ApiName":"RC1","Token":"****1oyg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OHV:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:37:02.496 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:37:02.498 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 243.4239 ms
2022-02-22 17:37:02.499 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1137 - 200 - application/json;+charset=UTF-8 244.9926ms
2022-02-22 17:37:02.504 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1141
2022-02-22 17:37:02.505 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:02.507 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:02.577 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.579 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OI0:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:37:02.665 -08:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.737 -08:00 [INF] Executed DbCommand (68ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:37:02.741 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:37:02.742 -08:00 [INF] {"ApiName":"RC1","Token":"****1oyg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OI0:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:37:02.748 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:37:02.749 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 244.6262 ms
2022-02-22 17:37:02.750 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1141 - 200 - application/json;+charset=UTF-8 246.1250ms
2022-02-22 17:37:02.755 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1146
2022-02-22 17:37:02.756 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:02.758 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:02.833 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'Viking'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.835 -08:00 [INF] {"ApiName":"Viking.Annotation","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OI1:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:37:02.921 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:02.993 -08:00 [INF] Executed DbCommand (68ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:37:02.996 -08:00 [INF] {"ApiName":"Viking.Annotation","IsActive":true,"Token":"****1oyg","ClaimTypes":["nbf","exp","iss","aud","client_id","sub","auth_time","idp","role","name","id","jti","iat","scope","amr"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HMFMDJSQ0OI1:00000002","TimeStamp":"2022-02-23T01:37:02.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2022-02-22 17:37:03.003 -08:00 [INF] Success token introspection. Token active: true, for API name: Viking.Annotation
2022-02-22 17:37:03.004 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 248.2499 ms
2022-02-22 17:37:03.006 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1146 - 200 - application/json;+charset=UTF-8 250.9424ms
2022-02-22 17:37:03.014 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1135
2022-02-22 17:37:03.015 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:03.017 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:03.097 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:03.099 -08:00 [INF] {"ApiName":"openid","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI2:00000002","TimeStamp":"2022-02-23T01:37:03.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:37:03.102 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:37:03.103 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:37:03.103 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 88.2733 ms
2022-02-22 17:37:03.105 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1135 - 401 0 - 90.5484ms
2022-02-22 17:37:03.109 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1139
2022-02-22 17:37:03.110 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:03.112 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:03.185 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'Bogus'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:03.187 -08:00 [INF] {"ApiName":"Bogus.Read","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI3:00000002","TimeStamp":"2022-02-23T01:37:03.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:37:03.191 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:37:03.191 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:37:03.192 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 82.6268 ms
2022-02-22 17:37:03.193 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1139 - 401 0 - 84.2040ms
2022-02-22 17:37:03.197 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1138
2022-02-22 17:37:03.197 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:37:03.202 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:37:03.273 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:03.276 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OI4:00000002","TimeStamp":"2022-02-23T01:37:03.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:37:03.345 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:37:03.417 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:37:03.420 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:37:03.421 -08:00 [INF] {"ApiName":"RC1","Token":"****1oyg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OI4:00000002","TimeStamp":"2022-02-23T01:37:03.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:37:03.427 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:37:03.428 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 230.7337 ms
2022-02-22 17:37:03.429 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1138 - 200 - application/json;+charset=UTF-8 232.1150ms
2022-02-22 17:37:17.595 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:37:17.656 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:37:17.658 -08:00 [INF] Removing 0 grants
2022-02-22 17:37:17.711 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:37:17.716 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:37:47.775 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:37:47.854 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:37:47.856 -08:00 [INF] Removing 0 grants
2022-02-22 17:37:47.927 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:37:47.929 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:38:17.950 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:38:18.012 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:38:18.030 -08:00 [INF] Removing 0 grants
2022-02-22 17:38:18.095 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:38:18.097 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:38:48.119 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:38:48.197 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:38:48.201 -08:00 [INF] Removing 0 grants
2022-02-22 17:38:48.269 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:38:48.272 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:39:18.295 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:39:18.380 -08:00 [INF] Executed DbCommand (82ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:39:18.392 -08:00 [INF] Removing 0 grants
2022-02-22 17:39:18.470 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:39:18.477 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:39:48.493 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:39:48.570 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:39:48.573 -08:00 [INF] Removing 0 grants
2022-02-22 17:39:48.650 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:39:48.661 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:40:18.675 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:40:18.768 -08:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:40:18.771 -08:00 [INF] Removing 0 grants
2022-02-22 17:40:18.917 -08:00 [INF] Executed DbCommand (146ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:40:18.919 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:40:48.923 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:40:48.965 -08:00 [INF] Executed DbCommand (39ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:40:48.972 -08:00 [INF] Removing 0 grants
2022-02-22 17:40:49.030 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:40:49.035 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:41:19.042 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:41:19.111 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:41:19.112 -08:00 [INF] Removing 0 grants
2022-02-22 17:41:19.178 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:41:19.180 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:41:49.185 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:41:49.233 -08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:41:49.235 -08:00 [INF] Removing 0 grants
2022-02-22 17:41:49.284 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:41:49.286 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:42:19.288 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:42:19.358 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:42:19.360 -08:00 [INF] Removing 0 grants
2022-02-22 17:42:19.427 -08:00 [INF] Executed DbCommand (66ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:42:19.430 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:42:49.442 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:42:49.511 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:42:49.518 -08:00 [INF] Removing 0 grants
2022-02-22 17:42:49.576 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:42:49.578 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:43:19.587 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:43:19.654 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:43:19.660 -08:00 [INF] Removing 0 grants
2022-02-22 17:43:19.718 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:43:19.720 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:43:49.742 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:43:49.806 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:43:49.813 -08:00 [INF] Removing 0 grants
2022-02-22 17:43:49.869 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:43:49.871 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:44:19.882 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:44:19.944 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:44:19.946 -08:00 [INF] Removing 0 grants
2022-02-22 17:44:19.992 -08:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:44:19.994 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:44:49.998 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:44:50.076 -08:00 [INF] Executed DbCommand (71ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:44:50.082 -08:00 [INF] Removing 0 grants
2022-02-22 17:44:50.142 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:44:50.144 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:45:20.160 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:45:20.235 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:45:20.237 -08:00 [INF] Removing 0 grants
2022-02-22 17:45:20.294 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:45:20.312 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:45:50.320 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:45:50.384 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:45:50.390 -08:00 [INF] Removing 0 grants
2022-02-22 17:45:50.464 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:45:50.469 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:46:20.484 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:46:20.555 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:46:20.557 -08:00 [INF] Removing 0 grants
2022-02-22 17:46:20.611 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:46:20.614 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:46:50.628 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:46:50.714 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:46:50.723 -08:00 [INF] Removing 0 grants
2022-02-22 17:46:50.793 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:46:50.804 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:47:20.820 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:47:20.880 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:47:20.883 -08:00 [INF] Removing 0 grants
2022-02-22 17:47:20.960 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:47:20.969 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:47:50.975 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:47:51.056 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:47:51.058 -08:00 [INF] Removing 0 grants
2022-02-22 17:47:51.122 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:47:51.129 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:48:21.154 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:48:21.231 -08:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:48:21.233 -08:00 [INF] Removing 0 grants
2022-02-22 17:48:21.314 -08:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:48:21.326 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:48:51.331 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:48:51.396 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:48:51.398 -08:00 [INF] Removing 0 grants
2022-02-22 17:48:51.456 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:48:51.462 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:49:21.477 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:49:21.545 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:49:21.553 -08:00 [INF] Removing 0 grants
2022-02-22 17:49:21.603 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:49:21.611 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:49:51.636 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:49:51.697 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:49:51.703 -08:00 [INF] Removing 0 grants
2022-02-22 17:49:51.763 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:49:51.765 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:50:21.785 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:50:21.883 -08:00 [INF] Executed DbCommand (95ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:50:21.896 -08:00 [INF] Removing 0 grants
2022-02-22 17:50:21.945 -08:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:50:21.951 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:50:51.966 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:50:52.022 -08:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:50:52.024 -08:00 [INF] Removing 0 grants
2022-02-22 17:50:52.089 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:50:52.095 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:51:22.110 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:51:22.190 -08:00 [INF] Executed DbCommand (78ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:51:22.192 -08:00 [INF] Removing 0 grants
2022-02-22 17:51:22.255 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:51:22.262 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:51:52.265 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:51:52.326 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:51:52.332 -08:00 [INF] Removing 0 grants
2022-02-22 17:51:52.389 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:51:52.393 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:52:22.412 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:52:22.473 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:52:22.478 -08:00 [INF] Removing 0 grants
2022-02-22 17:52:22.550 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:52:22.558 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:52:52.564 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:52:52.632 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:52:52.634 -08:00 [INF] Removing 0 grants
2022-02-22 17:52:52.705 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:52:52.712 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:53:22.723 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:53:22.782 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:53:22.795 -08:00 [INF] Removing 0 grants
2022-02-22 17:53:22.845 -08:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:53:22.848 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:53:52.868 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:53:52.926 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:53:52.928 -08:00 [INF] Removing 0 grants
2022-02-22 17:53:52.993 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:53:53.001 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:54:23.008 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:54:23.090 -08:00 [INF] Executed DbCommand (79ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:54:23.096 -08:00 [INF] Removing 0 grants
2022-02-22 17:54:23.174 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:54:23.181 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:54:53.189 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:54:53.269 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:54:53.274 -08:00 [INF] Removing 0 grants
2022-02-22 17:54:53.341 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:54:53.350 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:55:23.357 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:55:23.418 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:55:23.435 -08:00 [INF] Removing 0 grants
2022-02-22 17:55:23.492 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:55:23.498 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:55:53.502 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:55:53.566 -08:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:55:53.569 -08:00 [INF] Removing 0 grants
2022-02-22 17:55:53.630 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:55:53.636 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:56:23.644 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:56:23.708 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:56:23.711 -08:00 [INF] Removing 0 grants
2022-02-22 17:56:23.767 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:56:23.780 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:56:24.076 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:56:24.078 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:56:24.080 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:24.827 -08:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:24.832 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 755.2601 ms
2022-02-22 17:56:24.834 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 757.4692ms
2022-02-22 17:56:24.900 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:56:24.901 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:56:24.904 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 2.6255 ms
2022-02-22 17:56:24.905 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.7402ms
2022-02-22 17:56:24.968 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:56:24.969 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:56:24.973 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:25.048 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:25.051 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDJSQ0OI6:00000002","TimeStamp":"2022-02-23T01:56:25.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:56:25.128 -08:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:25.174 -08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:56:25.247 -08:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:25.307 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:56:25.313 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:56:25.314 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDJSQ0OI6:00000002","TimeStamp":"2022-02-23T01:56:25.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:56:25.414 -08:00 [INF] Executed DbCommand (93ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:56:25.416 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:56:25.481 -08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:56:25.540 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:56:25.600 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:56:25.660 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:56:25.664 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****wOVg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDJSQ0OI6:00000002","TimeStamp":"2022-02-23T01:56:25.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:56:25.675 -08:00 [INF] HTTP POST /connect/token responded 200 in 706.2587 ms
2022-02-22 17:56:25.676 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 708.2935ms
2022-02-22 17:56:25.685 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:56:25.686 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:56:25.687 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:25.774 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:25.834 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:56:25.887 -08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:56:25.954 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:56:26.020 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:56:26.080 -08:00 [INF] Executed DbCommand (58ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:56:26.082 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:56:26.083 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 397.3989 ms
2022-02-22 17:56:26.084 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 398.9204ms
2022-02-22 17:56:26.091 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:56:26.093 -08:00 [INF] Successfully validated the token.
2022-02-22 17:56:26.094 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:56:26.095 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:56:26.125 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:56:26.126 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:26.127 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:26.213 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:26.215 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI8:00000002","TimeStamp":"2022-02-23T01:56:26.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:56:26.219 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:56:26.220 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:56:26.220 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 93.8312 ms
2022-02-22 17:56:26.221 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 95.7185ms
2022-02-22 17:56:26.231 -08:00 [INF] Received HTTP response headers after 136.6875ms - 401
2022-02-22 17:56:26.233 -08:00 [INF] End processing HTTP request after 138.6512ms - 401
2022-02-22 17:56:26.233 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:56:26.234 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:56:26.235 -08:00 [INF] Authorization was successful.
2022-02-22 17:56:26.236 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:56:26.237 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:56:26.259 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:56:26.263 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.1893ms.
2022-02-22 17:56:26.264 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:56:26.265 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 26.8879ms
2022-02-22 17:56:26.266 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:56:26.267 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 176.1705 ms
2022-02-22 17:56:26.268 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 177.7396ms
2022-02-22 17:56:26.269 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:56:26.270 -08:00 [INF] Successfully validated the token.
2022-02-22 17:56:26.271 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:56:26.271 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:56:26.299 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:56:26.301 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:26.302 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:26.367 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:26.372 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI8:00000003","TimeStamp":"2022-02-23T01:56:26.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:56:26.377 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:56:26.377 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:56:26.378 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 77.4293 ms
2022-02-22 17:56:26.379 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 80.0021ms
2022-02-22 17:56:26.387 -08:00 [INF] Received HTTP response headers after 115.9365ms - 401
2022-02-22 17:56:26.389 -08:00 [INF] End processing HTTP request after 118.7677ms - 401
2022-02-22 17:56:26.390 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:56:26.391 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:56:26.392 -08:00 [INF] Authorization was successful.
2022-02-22 17:56:26.392 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:56:26.393 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:56:26.411 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:56:26.412 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:26.474 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:56:26.540 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:56:26.600 -08:00 [INF] Executed DbCommand (56ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:56:26.660 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:56:26.720 -08:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
2022-02-22 17:56:29.426 -08:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
2022-02-22 17:56:47.435 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21023.1212ms.
2022-02-22 17:56:47.437 -08:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Int64, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-02-22 17:56:47.496 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) in 21102.1999ms
2022-02-22 17:56:47.498 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:56:47.499 -08:00 [INF] HTTP GET /api/permissions/Volume responded 200 in 21229.3352 ms
2022-02-22 17:56:47.500 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - - - 200 - application/json;+charset=utf-8 21230.7155ms
2022-02-22 17:56:47.516 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1137
2022-02-22 17:56:47.517 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:47.520 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:47.589 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:47.592 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OI9:00000002","TimeStamp":"2022-02-23T01:56:47.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:56:47.662 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:47.735 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:56:47.738 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:56:47.739 -08:00 [INF] {"ApiName":"RC1","Token":"****wOVg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OI9:00000002","TimeStamp":"2022-02-23T01:56:47.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:56:47.746 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:56:47.747 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 229.7950 ms
2022-02-22 17:56:47.748 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1137 - 200 - application/json;+charset=UTF-8 231.4504ms
2022-02-22 17:56:47.762 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1141
2022-02-22 17:56:47.763 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:47.797 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:47.868 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:47.871 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OIA:00000002","TimeStamp":"2022-02-23T01:56:47.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:56:47.936 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:48.009 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:56:48.012 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:56:48.013 -08:00 [INF] {"ApiName":"RC1","Token":"****wOVg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OIA:00000002","TimeStamp":"2022-02-23T01:56:48.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:56:48.020 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:56:48.020 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 257.6891 ms
2022-02-22 17:56:48.021 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1141 - 200 - application/json;+charset=UTF-8 259.5337ms
2022-02-22 17:56:48.027 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1146
2022-02-22 17:56:49.744 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:49.746 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:49.808 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'Viking'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:49.811 -08:00 [INF] {"ApiName":"Viking.Annotation","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OIB:00000002","TimeStamp":"2022-02-23T01:56:49.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:56:49.889 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:49.956 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:56:49.959 -08:00 [INF] {"ApiName":"Viking.Annotation","IsActive":true,"Token":"****wOVg","ClaimTypes":["nbf","exp","iss","aud","client_id","sub","auth_time","idp","role","name","id","jti","iat","scope","amr"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HMFMDJSQ0OIB:00000002","TimeStamp":"2022-02-23T01:56:49.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2022-02-22 17:56:49.966 -08:00 [INF] Success token introspection. Token active: true, for API name: Viking.Annotation
2022-02-22 17:56:49.967 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 1938.9032 ms
2022-02-22 17:56:49.968 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1146 - 200 - application/json;+charset=UTF-8 1940.3528ms
2022-02-22 17:56:49.978 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1135
2022-02-22 17:56:49.980 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:49.982 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:50.056 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:50.058 -08:00 [INF] {"ApiName":"openid","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OIC:00000002","TimeStamp":"2022-02-23T01:56:50.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:56:50.062 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:56:50.062 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:56:50.063 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 83.5377 ms
2022-02-22 17:56:50.064 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1135 - 401 0 - 85.9902ms
2022-02-22 17:56:50.068 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1139
2022-02-22 17:56:50.069 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:50.070 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:50.135 -08:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'Bogus'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:50.137 -08:00 [INF] {"ApiName":"Bogus.Read","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OID:00000002","TimeStamp":"2022-02-23T01:56:50.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:56:50.141 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:56:50.142 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:56:50.143 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 73.7199 ms
2022-02-22 17:56:50.144 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1139 - 401 0 - 75.3398ms
2022-02-22 17:56:50.147 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1138
2022-02-22 17:56:50.148 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:56:50.149 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:56:50.215 -08:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE [r].[Name] = N'RC1'
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:50.217 -08:00 [INF] {"ApiName":"RC1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HMFMDJSQ0OIE:00000002","TimeStamp":"2022-02-23T01:56:50.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2022-02-22 17:56:50.295 -08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:56:50.362 -08:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:56:50.366 -08:00 [ERR] Expected scope ["RC1.Annotate","RC1.Read","RC1.Review"] is missing in token
2022-02-22 17:56:50.367 -08:00 [INF] {"ApiName":"RC1","Token":"****wOVg","ApiScopes":["RC1.Annotate","RC1.Read","RC1.Review"],"TokenScopes":["openid","Viking.Annotation"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HMFMDJSQ0OIE:00000002","TimeStamp":"2022-02-23T01:56:50.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2022-02-22 17:56:50.372 -08:00 [INF] Success token introspection. Token active: true, for API name: RC1
2022-02-22 17:56:50.373 -08:00 [INF] HTTP POST /connect/introspect responded 200 in 225.1385 ms
2022-02-22 17:56:50.376 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1138 - 200 - application/json;+charset=UTF-8 228.4636ms
2022-02-22 17:56:53.804 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:56:53.882 -08:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:56:53.884 -08:00 [INF] Removing 0 grants
2022-02-22 17:56:53.955 -08:00 [INF] Executed DbCommand (71ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:56:53.957 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:57:23.963 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:57:24.046 -08:00 [INF] Executed DbCommand (81ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:57:24.047 -08:00 [INF] Removing 0 grants
2022-02-22 17:57:24.119 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:57:24.125 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:57:54.144 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=IdentityServer 
2022-02-22 17:57:54.205 -08:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Expiration] < GETUTCDATE()
ORDER BY [p].[Key]
2022-02-22 17:57:54.210 -08:00 [INF] Removing 0 grants
2022-02-22 17:57:54.272 -08:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [d].[UserCode], [d].[ClientId], [d].[CreationTime], [d].[Data], [d].[Description], [d].[DeviceCode], [d].[Expiration], [d].[SessionId], [d].[SubjectId]
FROM [DeviceCodes] AS [d]
WHERE [d].[Expiration] < GETUTCDATE()
ORDER BY [d].[DeviceCode]
2022-02-22 17:57:54.275 -08:00 [INF] Removing 0 device flow codes
2022-02-22 17:58:05.454 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - -
2022-02-22 17:58:05.455 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-02-22 17:58:05.456 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:05.526 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:05.529 -08:00 [INF] HTTP GET /.well-known/openid-configuration responded 200 in 73.6829 ms
2022-02-22 17:58:05.530 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 75.3116ms
2022-02-22 17:58:05.574 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - -
2022-02-22 17:58:05.575 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-02-22 17:58:05.576 -08:00 [INF] HTTP GET /.well-known/openid-configuration/jwks responded 200 in 1.2987 ms
2022-02-22 17:58:05.577 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.3495ms
2022-02-22 17:58:05.635 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147
2022-02-22 17:58:05.642 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-02-22 17:58:05.645 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:05.719 -08:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:05.723 -08:00 [INF] {"ClientId":"ro.viking","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMFMDJSQ0OIG:00000002","TimeStamp":"2022-02-23T01:58:05.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-02-22 17:58:05.798 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:05.878 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__scope_ScopeName_0='Annotation' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[ResourceTypeId]
FROM [Permissions] AS [p]
WHERE [p].[PermissionId] = @__scope_ScopeName_0
2022-02-22 17:58:05.950 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:06.022 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedUserName_0='JAMESAN' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2022-02-22 17:58:06.032 -08:00 [INF] Credentials validated for username: jamesan
2022-02-22 17:58:06.033 -08:00 [INF] {"Username":"jamesan","Provider":null,"ProviderUserId":null,"SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","DisplayName":null,"Endpoint":"Token","ClientId":"ro.viking","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMFMDJSQ0OIG:00000002","TimeStamp":"2022-02-23T01:58:06.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-02-22 17:58:06.126 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__ResourceName_0='Viking' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [Resource] AS [r]
WHERE [r].[Name] = @__ResourceName_0
2022-02-22 17:58:06.129 -08:00 [INF] Token request validation success, {"ClientId":"ro.viking","ClientName":null,"GrantType":"password","Scopes":"openid Viking.Annotation","AuthorizationCode":"********","RefreshToken":"********","UserName":"jamesan","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"jamesan","password":"***REDACTED***","scope":"openid Viking.Annotation","client_id":"ro.viking","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-02-22 17:58:06.214 -08:00 [INF] Executed DbCommand (76ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:58:06.286 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:58:06.374 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:58:06.446 -08:00 [INF] Executed DbCommand (68ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:58:06.449 -08:00 [INF] {"ClientId":"ro.viking","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f89b1e95-8afd-48c4-bc81-a55be1297621","Scopes":"openid Viking.Annotation","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****WnXA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMFMDJSQ0OIG:00000002","TimeStamp":"2022-02-23T01:58:06.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-02-22 17:58:06.458 -08:00 [INF] HTTP POST /connect/token responded 200 in 822.0075 ms
2022-02-22 17:58:06.460 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/token application/x-www-form-urlencoded 147 - 200 - application/json;+charset=UTF-8 824.4019ms
2022-02-22 17:58:06.468 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/connect/userinfo - -
2022-02-22 17:58:06.470 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-02-22 17:58:06.472 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:06.551 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:06.638 -08:00 [INF] Executed DbCommand (84ms) [Parameters=[@__p_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2022-02-22 17:58:06.710 -08:00 [INF] Executed DbCommand (69ms) [Parameters=[@__user_Id_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2022-02-22 17:58:06.782 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN (
    SELECT [a0].[Id], [a0].[Name]
    FROM [AspNetRoles] AS [a0]
    WHERE [a0].[Discriminator] = N'ApplicationRole'
) AS [t] ON [a].[RoleId] = [t].[Id]
WHERE [a].[UserId] = @__userId_0
2022-02-22 17:58:06.870 -08:00 [INF] Executed DbCommand (86ms) [Parameters=[@__normalizedName_0='ADMINISTRATOR' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE ([a].[Discriminator] = N'ApplicationRole') AND ([a].[NormalizedName] = @__normalizedName_0)
2022-02-22 17:58:06.942 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__role_Id_0='cdf2b676-7edc-4d96-9ebb-8d1968734482' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2022-02-22 17:58:06.944 -08:00 [INF] Profile service returned the following claim types: sub
2022-02-22 17:58:06.945 -08:00 [INF] HTTP GET /connect/userinfo responded 200 in 476.3058 ms
2022-02-22 17:58:06.945 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 477.7285ms
2022-02-22 17:58:06.953 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - -
2022-02-22 17:58:06.954 -08:00 [INF] Successfully validated the token.
2022-02-22 17:58:06.954 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:58:06.955 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:58:06.979 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:58:06.982 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:58:06.984 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:07.062 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:07.065 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI8:00000004","TimeStamp":"2022-02-23T01:58:07.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:58:07.069 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:58:07.070 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:58:07.071 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 89.4570 ms
2022-02-22 17:58:07.072 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 93.0401ms
2022-02-22 17:58:07.080 -08:00 [INF] Received HTTP response headers after 125.5834ms - 401
2022-02-22 17:58:07.082 -08:00 [INF] End processing HTTP request after 127.7854ms - 401
2022-02-22 17:58:07.083 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:58:07.083 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:58:07.084 -08:00 [INF] Authorization was successful.
2022-02-22 17:58:07.085 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:58:07.086 -08:00 [INF] Route matched with {action = "GetUsername", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetUsername() on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:58:07.104 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) - Validation state: "Valid"
2022-02-22 17:58:07.106 -08:00 [INF] Executed action method IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0227ms.
2022-02-22 17:58:07.107 -08:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2022-02-22 17:58:07.108 -08:00 [INF] Executed action IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer) in 20.3391ms
2022-02-22 17:58:07.109 -08:00 [INF] Executed endpoint 'IdentityServer.Controllers.PermissionsController.GetUsername (IdentityServer)'
2022-02-22 17:58:07.110 -08:00 [INF] HTTP GET /api/permissions/CurrentUser responded 200 in 156.4372 ms
2022-02-22 17:58:07.111 -08:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/permissions/CurrentUser - - - 200 - application/json;+charset=utf-8 157.8993ms
2022-02-22 17:58:09.058 -08:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/permissions/Volume - -
2022-02-22 17:58:09.060 -08:00 [INF] Successfully validated the token.
2022-02-22 17:58:09.060 -08:00 [INF] Start processing HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:58:09.061 -08:00 [INF] Sending HTTP request POST "https://localhost:5001/connect/introspect"
2022-02-22 17:58:09.078 -08:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161
2022-02-22 17:58:09.080 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2022-02-22 17:58:09.081 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:09.142 -08:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint], [r0].[Id], [r0].[Description], [p].[ResourceTypeId], [p].[PermissionId], [p].[Description]
FROM [Resource] AS [r]
INNER JOIN [ResourceTypes] AS [r0] ON [r].[ResourceTypeId] = [r0].[Id]
LEFT JOIN [Permissions] AS [p] ON [r0].[Id] = [p].[ResourceTypeId]
WHERE 0 = 1
ORDER BY [r].[Id], [r0].[Id], [p].[ResourceTypeId], [p].[PermissionId]
2022-02-22 17:58:09.146 -08:00 [INF] {"ApiName":"mvc","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HMFMDJSQ0OI8:00000005","TimeStamp":"2022-02-23T01:58:09.0000000Z","ProcessId":33772,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2022-02-22 17:58:09.151 -08:00 [ERR] No API resource with that name found. aborting
2022-02-22 17:58:09.151 -08:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2022-02-22 17:58:09.152 -08:00 [INF] HTTP POST /connect/introspect responded 401 in 72.0213 ms
2022-02-22 17:58:09.153 -08:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/connect/introspect application/x-www-form-urlencoded 1161 - 401 0 - 74.8741ms
2022-02-22 17:58:09.161 -08:00 [INF] Received HTTP response headers after 99.5807ms - 401
2022-02-22 17:58:09.161 -08:00 [INF] End processing HTTP request after 101.0493ms - 401
2022-02-22 17:58:09.162 -08:00 [ERR] Error returned from introspection endpoint: Unauthorized
2022-02-22 17:58:09.163 -08:00 [INF] Introspection was not authenticated. Failure message: Error returned from introspection endpoint: Unauthorized
2022-02-22 17:58:09.164 -08:00 [INF] Authorization was successful.
2022-02-22 17:58:09.164 -08:00 [INF] Executing endpoint 'IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer)'
2022-02-22 17:58:09.165 -08:00 [INF] Route matched with {action = "UserPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.Dictionary`2[System.Int64,System.Object]] UserPermissions(System.String) on controller IdentityServer.Controllers.PermissionsController (IdentityServer).
2022-02-22 17:58:09.185 -08:00 [INF] Executing action method IdentityServer.Controllers.PermissionsController.UserPermissions (IdentityServer) - Validation state: "Valid"
2022-02-22 17:58:09.186 -08:00 [INF] Entity Framework Core 5.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: SensitiveDataLoggingEnabled DetailedErrorsEnabled 
2022-02-22 17:58:09.254 -08:00 [INF] Executed DbCommand (67ms) [Parameters=[@__username_0='jamesan' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FamilyName], [a].[GivenName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RegistrationDate], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[UserName] = @__username_0
2022-02-22 17:58:09.334 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GroupId], [u].[UserId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g].[ContainerGroupId], [g].[MemberGroupId]
FROM [UserToGroupAssignments] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [u].[GroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g] ON [t].[Id] = [g].[MemberGroupId]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[GroupId], [u].[UserId], [t].[Id], [g].[ContainerGroupId], [g].[MemberGroupId]
2022-02-22 17:58:09.422 -08:00 [INF] Executed DbCommand (85ms) [Parameters=[@__groupId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [t].[Description], [t].[Name], [t].[ParentID], [t].[ResourceTypeId], [g0].[ContainerGroupId], [g0].[MemberGroupId]
FROM [GroupToGroupAssignments] AS [g]
INNER JOIN (
    SELECT [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId]
    FROM [Resource] AS [r]
    WHERE [r].[ResourceTypeId] = N'Group'
) AS [t] ON [g].[ContainerGroupId] = [t].[Id]
LEFT JOIN [GroupToGroupAssignments] AS [g0] ON [t].[Id] = [g0].[MemberGroupId]
WHERE [g].[MemberGroupId] = @__groupId_0
ORDER BY [g].[ContainerGroupId], [g].[MemberGroupId], [t].[Id], [g0].[ContainerGroupId], [g0].[MemberGroupId]
2022-02-22 17:58:09.494 -08:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [g].[PermissionId], [g].[GroupId], [g].[GranteeType], [r].[Id], [r].[Description], [r].[Name], [r].[ParentID], [r].[ResourceTypeId], [r].[Endpoint]
FROM [GrantedGroupPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
2022-02-22 17:58:09.574 -08:00 [INF] Executed DbCommand (77ms) [Parameters=[@__userId_0='f89b1e95-8afd-48c4-bc81-a55be1297621' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[ResourceId], [r].[Name], [g].[PermissionId], [r].[ResourceTypeId]
FROM [GrantedUserPermissions] AS [g]
INNER JOIN [Resource] AS [r] ON [g].[ResourceId] = [r].[Id]
WHERE [g].[UserId] = @__userId_0
